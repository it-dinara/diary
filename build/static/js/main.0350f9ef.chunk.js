(this.webpackJsonpdiary=this.webpackJsonpdiary||[]).push([[0],[,,function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"y",(function(){return i})),n.d(t,"o",(function(){return s})),n.d(t,"n",(function(){return u})),n.d(t,"t",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"A",(function(){return j})),n.d(t,"s",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"q",(function(){return b})),n.d(t,"r",(function(){return p})),n.d(t,"p",(function(){return _})),n.d(t,"e",(function(){return O})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return y})),n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return T})),n.d(t,"x",(function(){return D})),n.d(t,"v",(function(){return I})),n.d(t,"u",(function(){return k})),n.d(t,"w",(function(){return w}));var r="AUTH_START",a="AUTH_SUCCESS",o="AUTH_FAIL",c="AUTH_LOGOUT",i="SET_REDIRECT_PATH",s="RE_AUTH_SUCCESS",u="RE_AUTH_FAIL",l="SET_ACTIVE",d="SET_TITLE",j="SET_VALUE",f="SAVE_NOTE_IN_STATE",h="NOTE_INIT",b="SAVE_DIARY_START",p="SAVE_DIARY_SUCCESS",_="SAVE_DIARY_FAIL",O="CLEAR_DIARY_OBJ_TO_EDIT",v="FETCH_POSTS_START",g="FETCH_POSTS_SUCCESS",m="FETCH_POSTS_FAIL",x="REMOVE_POST_START",y="REMOVE_POST_SUCCESS",S="REMOVE_POST_FAIL",T="REMOVE_NOTE_TO_EDIT",D="SET_POST_ID",I="SET_POST_DATA_TO_READ_START",k="SET_POST_DATA_TO_READ_FAIL",w="SET_POST_DATA_TO_READ_SUCCESS"},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"l",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"m",(function(){return _})),n.d(t,"i",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"h",(function(){return m})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return T}));var r=n(18),a=n.n(r),o=n(2),c=function(e,t){return{type:o.d,idToken:e,userId:t}},i=function(e){return{type:o.a,error:e}},s=function(){return localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:o.b}},u=function(){return function(e){var t="grant_type=refresh_token&refresh_token="+localStorage.getItem("refreshToken");a.a.post("https://securetoken.googleapis.com/v1/token?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk",t).then((function(t){console.log("----------------------- \n res ReAuth",t),e(c(t.data.id_token,t.data.user_id)),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId");var n=new Date((new Date).getTime()+1e3*t.data.expires_in);localStorage.setItem("token",t.data.id_token),localStorage.setItem("refreshToken",t.data.refresh_token),localStorage.setItem("expirationDate",n),localStorage.setItem("userId",t.data.user_id)})).catch((function(t){console.log("----------------------- \n err ReAuth",t),e(i(t))}))}},l=function(e,t,n){return function(r){r({type:o.c});var s={email:e,password:t,returnSecureToken:!0},u="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk";n||(u="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk"),a.a.post(u,s).then((function(e){console.log("response",e),console.log("userId",e.data.localId),console.log("response.data.expiresIn",e.data.expiresIn);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);console.log("expirationDate auth",t),localStorage.setItem("token",e.data.idToken),localStorage.setItem("refreshToken",e.data.refreshToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),r(c(e.data.idToken,e.data.localId))})).catch((function(e){console.log("err",e.response),r(i(e.response))}))}},d=function(e){return{type:o.y,path:e}},j=function(){return function(e){var t,n=localStorage.getItem("token");if(n){var r=new Date(localStorage.getItem("expirationDate"));if(r>new Date){var a=localStorage.getItem("userId");console.log("expirationDate authCheckState",r.getTime()-(new Date).getTime()),e(c(n,a)),e((t=r.getTime()-(new Date).getTime(),console.log("checkAuthTimeout",t),function(e){setTimeout((function(){return e(u())}),t)}))}else e(u())}else e(u())}},f=n(41),h=n.n(f),b=n(59),p=n(19),_=function(e){return{type:o.z,title:e}},O=function(e,t){return{type:o.s,title:e,value:t}},v=function(){return{type:o.i}},g=function(){return{type:o.e}},m=function(e,t){return function(n){n({type:o.q}),p.a.post("/journal.json?auth="+t,e).then((function(t){var r,a;console.log("response save",t),n((r=t.data.name,a=e,{type:o.r,diaryId:r,diary:a})),n(d("/posts"))})).catch((function(e){n(function(e){return{type:o.p,error:e}}(e))}))}},x=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r){var a,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:o.g}),a="?auth="+e+'&orderBy="userId"&equalTo="'+t+'"',n.prev=2,n.next=5,p.a.get("/journal.json"+a);case 5:c=n.sent,console.log("res.data",c.data),r((s=c.data,{type:o.h,fetchedPosts:s})),r(d(null)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),r((i=n.t0,{type:o.f,error:i}));case 14:case"end":return n.stop()}var i,s}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t){return t.length?function(n){n({type:o.l});var r="?auth="+e;a.a.delete("https://diary-a95bf.firebaseio.com/journal/"+t+".json"+r).then((function(e){console.log("REDUX postId",t),n(d("/posts"))})).catch((function(e){n(function(e){return{type:o.k,error:e}}(e))}))}:(console.log("Did not delete, removePost postId not correct",t),null)},S=function(e){return{type:o.x,postId:e}},T=function(e,t){return function(n){n({type:o.v});var r="?auth="+e;a.a.get("https://diary-a95bf.firebaseio.com/journal/"+t+".json"+r).then((function(e){var t;n((t=e.data,{type:o.w,postData:t})),n(d(null)),console.log("READUX READ RES",e)})).catch((function(e){n(function(e){return{type:o.u,error:e}}(e))}))}}},,,,,,function(e,t,n){e.exports={container:"DiaryBuilder_container__waIvh",buttons:"DiaryBuilder_buttons__VY0wE",button:"DiaryBuilder_button__2RX41",removeBtn:"DiaryBuilder_removeBtn__2b3yj",saveBtn:"DiaryBuilder_saveBtn__qly6N",buttonModal:"DiaryBuilder_buttonModal__2TFaK",cancel:"DiaryBuilder_cancel__2QfSk",modal:"DiaryBuilder_modal__33dkn",removePost:"DiaryBuilder_removePost__1AxzU",diary:"DiaryBuilder_diary__3Fa8Z"}},,,function(e,t,n){e.exports={wrapper:"Read_wrapper__nFYlo",post:"Read_post__1qQx9",name:"Read_name__3LoiP",content:"Read_content__P5kjF",container:"Read_container__O18C3",dateWrap:"Read_dateWrap__2DTX_",date:"Read_date__1oCyz",day:"Read_day__2xFhF",editPost:"Read_editPost__24twU",cover:"Read_cover__3DmCj",read:"Read_read__25AKb"}},,,,function(e,t,n){"use strict";var r=n(18),a=n.n(r).a.create({baseURL:"https://diary-a95bf.firebaseio.com/"});t.a=a},,,,,,,,,function(e,t,n){e.exports={buttonModal:"Posts_buttonModal__1FlBS",cancel:"Posts_cancel__1XBRl",modal:"Posts_modal__2wr99",removePost:"Posts_removePost__2hT6V",container:"Posts_container__qUh2w",newNote:"Posts_newNote__v6ma0",search:"Posts_search__eS_sr",panel:"Posts_panel__3pDcQ",list:"Posts_list__1deu5"}},function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__qGHu1",Open:"SideDrawer_Open__kTNRr",Close:"SideDrawer_Close__2d78w",Logo:"SideDrawer_Logo__3JQ6_"}},,,function(e,t,n){e.exports={vertical:"start_vertical__1wRj8",gorizontal:"start_gorizontal__33t_5",plus:"start_plus__ZYKcj",wrapper:"start_wrapper__1Q_JY"}},function(e,t,n){e.exports={Input:"Input_Input__1uNtk",Label:"Input_Label__1Z_2h",InputElement:"Input_InputElement__3HPvS",Invalid:"Input_Invalid__2Fq0P"}},,,function(e,t,n){e.exports={title:"Title_title__n3sn1",active:"Title_active__1NSJ5"}},function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__3S0e6",Logo:"Toolbar_Logo__2y_Xk",DesktopOnly:"Toolbar_DesktopOnly__2orJa"}},,,,,function(e,t,n){e.exports={textarea:"Diary_textarea__3HM62",wrap:"Diary_wrap__1xSGc",form:"Diary_form__3iWKO",name:"Diary_name__Wvp3K"}},,,function(e,t,n){e.exports={Button:"Button_Button__3GEbe",Success:"Button_Success__x83ai",Danger:"Button_Danger__CQBPT"}},function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__1Ojyr",active:"NavigationItem_active__2DTKK"}},,,,,,,,,,,,function(e,t,n){e.exports={titleMenu:"TitleMenu_titleMenu__wKkC2"}},,function(e,t,n){e.exports={Modal:"Modal_Modal__x-1cz"}},function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__2f0nG"}},function(e,t,n){e.exports={loader:"Spinner_loader__2F1J7"}},function(e,t,n){e.exports={Auth:"Auth_Auth__DwcC_"}},function(e,t,n){e.exports={Content:"Layout_Content__ED2tP"}},function(e,t,n){e.exports={Logo:"Logo_Logo__3w4rS",LogoText:"Logo_LogoText__2_B7_"}},function(e,t,n){e.exports={NavigationItems:"NavigationItems_NavigationItems__jhOoS"}},function(e,t,n){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__3rpdo"}},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n.n(a),c=n(34),i=n.n(c),s=n(16),u=n(3),l=n(20),d=n(57),j=(n(79),n(80),n(7)),f=n(22),h=n(13),b=n(17),p=n(58),_=n.n(p),O=n(36),v=n.n(O);var g=function(e){return Object(r.jsx)("li",{className:e.active?[v.a.title,v.a.active].join(" "):v.a.title,onClick:e.clicked,children:Object(r.jsx)("button",{children:e.name})})},m=n(6),x=o.a.memo((function(e){var t=Object(u.d)((function(e){return e.diary.titleArray})),n=Object(u.d)((function(e){return e.read.postData.note})),o=Object(u.d)((function(e){return e.read.postId})),c=Object(u.d)((function(e){return e.diary.template})),i=Object(a.useState)(!1),s=Object(h.a)(i,2),l=s[0],d=s[1],j=Object(u.c)();return Object(a.useEffect)((function(){if(o){var e,r=Object(f.a)(c);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(Object.keys(n).includes(a)){console.log("template title",a),j(m.m(a)),d(Object(b.a)({},a,!0));break}}}catch(i){r.e(i)}finally{r.f()}}else j(m.m(t[0].name)),d(Object(b.a)({},t[0].name,!0))}),[o,t,c,n,j]),Object(r.jsx)("ul",{className:_.a.titleMenu,children:t.map((function(e,t){return Object(r.jsx)(g,{name:e.name,clicked:function(t){return function(e,t,n){return e.preventDefault(),d((function(e){return Object(b.a)({},t,!e[t])})),j(m.m(t))}(t,e.name,e.id)},active:l[e.name]},e.id)}))})})),y=n(69),S=n(42),T=n.n(S),D=o.a.forwardRef((function(e,t){var n=Object(u.d)((function(e){return e.diary.title})),o=Object(u.d)((function(e){return e.diary.diaryObj})),c=o[n]?o[n]:"",i=Object(a.useState)(c),s=Object(h.a)(i,2),l=s[0],d=s[1],j=Object(u.c)(),f=Object(a.useRef)(null);return Object(a.useEffect)((function(){j(m.i(n,l)),console.log("saveNoteInState value",l),f.current.focus()}),[n,l,j]),Object(r.jsx)("div",{className:T.a.wrap,children:Object(r.jsx)(y.a,{name:"textValue",minRows:15,onHeightChange:function(){},className:T.a.textarea,value:l,onChange:function(e){d(e.target.value)},ref:f,onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}})})})),I=n(12),k=n.n(I),w=n(19),N=n(4),C=n(24),A=n(25),E=n(27),P=n(26),R=n(60),L=n.n(R),B=n(61),F=n.n(B),M=function(e){return e.show?Object(r.jsx)("div",{className:F.a.Backdrop,onClick:e.clicked}):null},U=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||e.children!==this.props.children}},{key:"UNSAFE_componentWillUpdate",value:function(){}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M,{show:this.props.show,clicked:this.props.modalClosed}),Object(r.jsx)("div",{className:L.a.Modal,style:{transform:this.props.show?"translateY(0)":"translateY(-100vh)",opacity:this.props.show?"1":"0"},children:this.props.children})]})}}]),n}(a.Component),H=function(e,t){return function(n){Object(E.a)(o,n);var a=Object(P.a)(o);function o(){var e;Object(C.a)(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={error:null},e.errorConfirmedHandler=function(){e.setState({error:null})},e}return Object(A.a)(o,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=t.interceptors.request.use((function(t){return e.setState({error:null}),t})),this.resInterceptor=t.interceptors.response.use((function(e){return e}),(function(t){e.setState({error:t})}))}},{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptor),t.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[console.log("this.state.error",this.state.error),Object(r.jsx)(U,{show:this.state.error,modalClosed:this.errorConfirmedHandler,children:this.state.error?401===this.state.error.response.status?"please log in":this.state.error.message:null}),Object(r.jsx)(e,Object(N.a)({},this.props))]})}}]),o}(a.Component)};var z=H((function(){var e,t=Object(u.d)((function(e){return e.diary.title})),n=Object(u.d)((function(e){return e.diary.titleArray})),o=Object(u.d)((function(e){return e.diary.diaryObj})),c=Object(u.d)((function(e){return e.auth})),i=c.token,s=c.userId,l=Object(u.d)((function(e){return e.read.postId})),d=Object(u.d)((function(e){return e.read.postData.millsec})),b=Object(u.d)((function(e){return e.read.postData.fullDate})),p=Object(u.c)(),_=Object(a.useState)(!1),O=Object(h.a)(_,2),v=O[0],g=O[1],y=Object(u.d)((function(e){return e.auth.redirectPath}))&&Object(r.jsx)(j.a,{to:"/posts"}),S=Object(r.jsxs)(U,{show:v,modalClosed:function(){g(!1)},children:[console.log("removing",v),Object(r.jsx)("p",{style:{textAlign:"center"},children:"Are you sure you want to delete the post?"}),Object(r.jsxs)("div",{className:k.a.modal,children:[Object(r.jsx)("button",{className:[k.a.buttonModal,k.a.cancel].join(" "),onClick:function(e){e.preventDefault(),g(!1)},children:"cancel"}),Object(r.jsx)("button",{className:[k.a.buttonModal,k.a.removePost].join(" "),onClick:function(e){!function(e){e.preventDefault(),l&&p(m.g(i,l))}(e),g(!1)},children:"delete"})]})]}),T=null,I=Object(f.a)(n);try{for(I.s();!(e=I.n()).done;){var w=e.value;t===w.name&&(T=Object(r.jsx)(D,{},w.name))}}catch(C){I.e(C)}finally{I.f()}var N=null;return l&&(N=Object(r.jsx)("button",{className:[k.a.button,k.a.removeBtn].join(" "),onClick:function(e){e.preventDefault(),g(!0)},children:"Delete"})),Object(r.jsx)("form",{action:"",children:Object(r.jsxs)("div",{className:k.a.container,children:[Object(r.jsxs)("div",{className:k.a.buttons,children:[Object(r.jsx)("button",{className:[k.a.button,k.a.saveBtn].join(" "),onClick:function(e){return function(e){e.preventDefault(),l&&p(m.g(i,l));var t={};for(var n in o)o[n]&&(t[n]=o[n],console.log("note",t));var r=new Date;console.log("date",r);var a=r.getFullYear(),c=r.getMonth(),u=r.getDate(),j=r.getHours(),f=r.getMinutes(),h=function(e){return e.toString().length<2?"0"+e:e},_=u+"."+h(c+1)+"."+a+" "+h(j)+":"+h(f),O=Date.parse(r);console.log("postDate",b),console.log("postMillsec",d);var v={note:t,userId:s,fullDate:l&&b?b:_,millsec:l&&d?d:O};Object.keys(t).length>0&&p(m.h(v,i))}(e)},children:"Save"}),N]}),Object(r.jsxs)("div",{className:k.a.diary,children:[Object(r.jsx)(x,{}),T]}),S,y]})})}),w.a),V=n(32),q=n.n(V);var Y=H((function(){var e=Object(j.g)(),t=Object(u.c)(),n=Object(u.d)((function(e){return e.diary.redirect}));return Object(r.jsx)("div",{className:q.a.wrapper,onClick:function(){t(m.f()),e.replace("/"),console.log("redirect",n)},children:Object(r.jsxs)("div",{className:q.a.plus,children:[Object(r.jsx)("div",{className:q.a.vertical}),Object(r.jsx)("div",{className:q.a.gorizontal})]})})}),w.a),Q=n(15),W=n.n(Q),J=n(62),K=n.n(J),X=function(){return Object(r.jsx)("div",{className:K.a.loader,children:Object(r.jsx)("div",{children:"Loading..."})})},G=function(){var e=Object(u.d)((function(e){return e.read.postData})),t=Object(j.g)(),n=Object(u.c)(),a=Object(u.d)((function(e){return e.diary.template})),o=[],c=null;if(e){c=e.note,console.log("postNote",c);var i,s=Object(f.a)(a);try{for(s.s();!(i=s.n()).done;){var l=i.value;c[l]&&o.push({name:l,content:c[l]})}}catch(b){s.e(b)}finally{s.f()}}var d=X;if(e){console.log("notes",o);var h=o.map((function(e,t){return Object(r.jsxs)("div",{className:W.a.container,children:[Object(r.jsx)("p",{className:W.a.name,children:e.name}),Object(r.jsx)("p",{className:W.a.content,children:e.content})]},t)}));d=Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:W.a.wrapper,children:Object(r.jsxs)("div",{className:W.a.post,children:[Object(r.jsx)("button",{className:W.a.editPost,onClick:function(){return function(){for(var e in c)n(m.i(e,c[e]));t.push("/")}()},children:"edit"}),Object(r.jsxs)("div",{className:W.a.read,children:[Object(r.jsxs)("div",{className:W.a.dateWrap,children:[Object(r.jsx)("p",{className:[W.a.date,W.a.day].join(" "),children:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][new Date(e.millsec).getDay()]}),Object(r.jsx)("p",{className:W.a.date,children:e.fullDate})]}),h]})]})})})}return e?d:Object(r.jsx)(X,{})},Z=n(28),$=n.n(Z),ee=o.a.lazy((function(){return n.e(3).then(n.bind(null,102))})),te=H((function(){var e=Object(u.d)((function(e){return e.auth})),t=e.token,n=e.userId,o=Object(u.d)((function(e){return e.diary})),c=o.loading,i=o.fetchedPostsRes,s=Object(u.c)(),l=Object(a.useState)(""),d=Object(h.a)(l,2),f=d[0],b=d[1];Object(a.useEffect)((function(){s(m.i(null)),s(m.k(null))}),[s]),Object(a.useEffect)((function(){s(m.d(t,n))}),[t,n,s]);var p=[];for(var _ in i)i[_].millsec&&p.push(i[_]);var O=Object(a.useState)(!1),v=Object(h.a)(O,2),g=v[0],x=v[1];g?p.sort((function(e,t){return e.millsec-t.millsec})):p.sort((function(e,t){return t.millsec-e.millsec}));var y=Object(r.jsx)(X,{});c||(y=p.map((function(e){return""===f||Object.keys(e.note).concat(Object.values(e.note)).join(" ").indexOf(f)>=0?Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(ee,{note:e.note,fullDate:e.fullDate,postId:e.id,millsec:e.millsec})},e.id):null})));var S=Object(j.g)(),T=Object(r.jsx)("button",{className:$.a.newNote,onClick:function(e){s(m.f()),S.push("/")},children:"New note"});return Object(r.jsxs)("div",{className:$.a.container,children:[Object(r.jsxs)("div",{className:$.a.panel,children:[T,Object(r.jsxs)("div",{className:$.a.search,children:[Object(r.jsx)("button",{onClick:function(){x(!g)},children:g?"\u2193\u2191":"\u2191\u2193"}),Object(r.jsx)("input",{type:"text",value:f,onChange:function(e){console.log("val",e.target.value),b(e.target.value)}})]})]}),Object(r.jsx)("div",{className:$.a.list,children:y})]})}),w.a),ne=n(45),re=n.n(ne),ae=function(e){return Object(r.jsx)("button",{disabled:e.disabled,className:[re.a.Button,re.a[e.btnType]].join(" "),onClick:e.clicked,children:e.children})},oe=n(33),ce=n.n(oe),ie=function(e){var t=null,n=[ce.a.InputElement];switch(e.invalid&&e.shouldValidate&&e.touched&&n.push(ce.a.Invalid),e.elementType){case"input":t=Object(r.jsx)("input",Object(N.a)(Object(N.a)({className:n.join(" ")},e.elementConfig),{},{id:e.id,value:e.value,onChange:e.changed}));break;case"textarea":t=Object(r.jsx)("textarea",Object(N.a)(Object(N.a)({className:n.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.changed}));break;case"select":t=Object(r.jsx)("select",{className:n.join(" "),value:e.value,onChange:e.changed,children:e.elementConfig.options.map((function(e){return Object(r.jsx)("option",{value:e.value,children:e.displayValue},e.value)}))});break;default:t=Object(r.jsx)("input",Object(N.a)(Object(N.a)({className:n.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.changed}))}return Object(r.jsxs)("div",{className:ce.a.Input,children:[Object(r.jsx)("label",{className:ce.a.Label,htmlFor:e.id,children:e.label}),t]})},se=n(63),ue=n.n(se),le=function(){var e=Object(a.useState)({email:{elementType:"input",elementConfig:{type:"email",placeholder:"Mail Address"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1,id:"email"},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1,id:"password"}}),t=Object(h.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(h.a)(c,2),s=i[0],l=i[1],d=Object(u.d)((function(e){return e.auth.loading})),f=Object(u.d)((function(e){return e.auth.error})),p=Object(u.d)((function(e){return e.auth.token})),_=Object(u.d)((function(e){return e.auth.redirectPath})),O=Object(u.c)(),v=function(e,t){var n=!0;if(!t)return!0;if(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),t.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n}if(t.isNumeric){n=/^\d+$/.test(e)&&n}return n},g=Object(j.g)(),x=[];for(var y in n)x.push({key:y,config:n[y]});var S=x.map((function(e,t){return Object(r.jsx)(ie,{elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return function(e,t){var r=Object(N.a)(Object(N.a)({},n),{},Object(b.a)({},t,Object(N.a)(Object(N.a)({},n[t]),{},{value:e.target.value,valid:v(e.target.value,n[t].validation),touched:!0})));o(r)}(t,e.key)},id:e.config.id,for:e.config.id},e.key)}));d&&(S=Object(r.jsx)(X,{}));var T=null;p&&(console.log("isAuthenticated",p),T=Object(r.jsx)(j.a,{to:_}));var D=null;return f&&(D=Object(r.jsx)("p",{children:f.data&&f.data.error.message})),Object(r.jsxs)("div",{className:ue.a.Auth,children:[T,D,Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(m.a(n.email.value,n.password.value,s)),g.replace("/posts")},children:[S,Object(r.jsx)(ae,{btnType:"Success",children:"SUBMIT"})]}),Object(r.jsxs)(ae,{btnType:"Danger",clicked:function(){console.log(s),l((function(e){return!e}))},children:["SWITCH TO ",s?" SIGNIN":" SIGNUP"]})]})},de=function(){var e=Object(u.c)();return Object(a.useEffect)((function(){e(m.e())}),[e]),Object(r.jsx)(j.a,{to:"/auth"})},je=function(e){return e.children},fe=n(64),he=n.n(fe),be=n(37),pe=n.n(be),_e=n.p+"static/media/diary.2fa09294.svg",Oe=n(65),ve=n.n(Oe),ge=function(e){return Object(r.jsx)("div",{className:ve.a.Logo,style:{height:e.height},children:Object(r.jsx)("img",{src:_e,style:{height:"53px"},alt:"Diary"})})},me=n(66),xe=n.n(me),ye=n(46),Se=n.n(ye),Te=function(e){return Object(r.jsx)("li",{className:Se.a.NavigationItem,children:Object(r.jsx)(s.b,{to:e.link,exact:e.exact,activeClassName:Se.a.active,children:e.children})})},De=function(e){return Object(r.jsxs)("ul",{className:xe.a.NavigationItems,children:[e.isAuthentication?Object(r.jsx)(Te,{link:"/posts",exact:!0,children:"Posts"}):null,e.isAuthentication?Object(r.jsx)(Te,{link:"/logout",children:"Logout"}):Object(r.jsx)(Te,{link:"/auth",children:"Authenticate"})]})},Ie=n(67),ke=n.n(Ie),we=function(e){return Object(r.jsxs)("div",{className:ke.a.DrawerToggle,onClick:e.clicked,children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})},Ne=function(e){return Object(r.jsxs)("header",{className:pe.a.Toolbar,children:[Object(r.jsx)(we,{clicked:e.drawerToggleClicked}),Object(r.jsx)("div",{className:pe.a.Logo,children:Object(r.jsx)(ge,{})}),Object(r.jsx)("nav",{className:pe.a.DesktopOnly,children:Object(r.jsx)(De,{isAuthentication:e.isAuthentication})})]})},Ce=n(29),Ae=n.n(Ce),Ee=function(e){var t=[Ae.a.SideDrawer,Ae.a.Close];return e.open&&(t=[Ae.a.SideDrawer,Ae.a.Open]),Object(r.jsxs)(je,{children:[Object(r.jsx)(M,{show:e.open,clicked:e.closed}),Object(r.jsxs)("div",{className:t.join(" "),children:[Object(r.jsx)("div",{className:Ae.a.Logo,children:Object(r.jsx)(ge,{})}),Object(r.jsx)("nav",{children:Object(r.jsx)(De,{isAuthentication:e.isAuthentication})})]})]})},Pe=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(C.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showSideDrawer:!1},e.sideDrawerClosedHandler=function(){e.setState({showSideDrawer:!1})},e.sideDrawerToggleHandler=function(){e.setState((function(e){return{showSideDrawer:!e.showSideDrawer}}))},e}return Object(A.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(je,{children:[Object(r.jsx)(Ne,{drawerToggleClicked:this.sideDrawerToggleHandler,isAuthentication:this.props.isAuthentication}),Object(r.jsx)(Ee,{isAuthentication:this.props.isAuthentication,open:this.state.showSideDrawer,closed:this.sideDrawerClosedHandler}),Object(r.jsx)("main",{className:he.a.Content,children:this.props.children})]})}}]),n}(a.Component),Re=Object(u.b)((function(e){return{isAuthentication:null!==e.auth.token}}))(Pe),Le=Object(j.h)((function(e){var t=Object(u.d)((function(e){return null!==e.auth.token})),n=Object(u.c)();Object(a.useEffect)((function(){n(m.b());var e=localStorage.getItem("expirationDate");console.log("expirationDate App",e)}),[n]);var o=Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/auth",exact:!0,component:le}),Object(r.jsx)(j.a,{to:"/auth"})]});return t&&(o=Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/start",component:Y}),Object(r.jsx)(j.b,{path:"/logout",component:de}),Object(r.jsx)(j.b,{path:"/posts",component:te}),Object(r.jsx)(j.b,{path:"/",exact:!0,component:z}),Object(r.jsx)(j.b,{path:"/read",component:G}),Object(r.jsx)(j.a,{to:"/posts"})]})),Object(r.jsx)("div",{children:Object(r.jsx)(Re,{children:o})})})),Be=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,103)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Fe=n(2),Me=function(e,t){return Object(N.a)(Object(N.a)({},e),t)},Ue={token:null,userId:null,error:null,loading:!1,redirectPath:"/"},He=function(e,t){return Me(e,{error:null,loading:!0})},ze=function(e,t){return Me(e,{token:t.idToken,userId:t.userId,loading:!1,error:null})},Ve=function(e,t){return Me(e,{loading:!1,error:t.error})},qe=function(e,t){return Me(e,{token:t.idToken,userId:t.userId,error:null})},Ye=function(e,t){return Me(e,{loading:!1,error:t.error})},Qe=function(e,t){return Me(e,{token:null,userId:null})},We=function(e,t){return Me(e,{redirectPath:t.path})},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe.c:return He(e);case Fe.d:return ze(e,t);case Fe.a:return Ve(e,t);case Fe.o:return qe(e,t);case Fe.n:return Ye(e,t);case Fe.b:return Qe(e);case Fe.y:return We(e,t);default:return e}},Ke=n(68),Xe={loading:!1,removing:!1,fetchedPostsRes:[],diaryId:"",date:"",newDate:"",title:"",active:!1,titleArray:[{id:0,name:"context"},{id:1,name:"feelings"},{id:3,name:"thought"},{id:2,name:"body"},{id:4,name:"isItFamiliar"},{id:5,name:"decision"},{id:6,name:"conclusion"},{id:7,name:"want"},{id:8,name:"care"}],template:["context","feelings","body","thought","isItFamiliar","decision","conclusion","want","care"],diaryObj:{}},Ge=function(e,t){return Me(e,{active:t.active})},Ze=function(e,t){return Me(e,{title:t.title})},$e=function(e,t){return Me(e,{value:t.value})},et=function(e,t){return Object(N.a)(Object(N.a)({},e),{},{diaryObj:{}})},tt=function(e,t){var n=null;return t.value&&(n=t.value),Object(N.a)(Object(N.a)({},e),{},{diaryObj:Object(N.a)(Object(N.a)({},e.diaryObj),{},Object(b.a)({},t.title,n))})},nt=function(e,t){var n=new Date;console.log("date",n);var r=n.getFullYear(),a=n.getMonth(),o=n.getDate(),c=n.getHours(),i=n.getMinutes(),s=function(e){return e.toString().length<2?"0"+e:e};s(a+1),s(c),s(i),Date.parse(n);return Me(e,{title:t.title,diaryObj:{},fullDate:null,millsec:null})},rt=function(e,t){return Me(e,{loading:!0})},at=function(e,t){return Me(e,{loading:!1,error:t.error})},ot=function(e,t){return Me(e,{loading:!1,diaryId:t.diaryId})},ct=function(e,t){return Me(e,{loading:!0})},it=function(e,t){return Me(e,{loading:!1,error:t.error})},st=function(e,t){var n=[];for(var r in t.fetchedPosts)n.push(Object(N.a)(Object(N.a)({},t.fetchedPosts[r]),{},{id:r}));return Object(N.a)(Object(N.a)({},e),{},{loading:!1,fetchedPostsRes:n})},ut=function(e,t){return Object(N.a)(Object(N.a)({},e),{},{loading:!0})},lt=function(e,t){var n=[],r=Object(Ke.a)(e.fetchedPostsRes);for(var a in r)r[a].id!==t.postId&&n.push(r[a]);return Object(N.a)(Object(N.a)({},e),{},{fetchedPostsRes:n,loading:!1})},dt=function(e,t){return Object(N.a)(Object(N.a)({},e),{},{loading:!1,error:t.error})},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe.t:return Ge(e,t);case Fe.z:return Ze(e,t);case Fe.A:return $e(e,t);case Fe.s:return tt(e,t);case Fe.i:return nt(e,t);case Fe.q:return rt(e);case Fe.p:return at(e,t);case Fe.r:return ot(e,t);case Fe.g:return ct(e);case Fe.f:return it(e,t);case Fe.h:return st(e,t);case Fe.m:return lt(e,t);case Fe.l:return ut(e);case Fe.k:return dt(e,t);case Fe.e:return et(e);default:return e}},ft={postData:{fullDate:null,millsec:null,note:{},userId:null},postId:null},ht=function(e,t){return Me(e,{postId:t.postId})},bt=function(e,t){return Me(e,{loading:!0,postData:null})},pt=function(e,t){return Me(e,{loading:!1,postData:t.postData})},_t=function(e,t){return Me(e,{loading:!1,error:t.error})},Ot=function(e,t){return Me(e,{postNote:t.postNote})},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe.j:return Ot(e,t);case Fe.x:return ht(e,t);case Fe.v:return bt(e);case Fe.w:return pt(e,t);case Fe.u:return _t(e,t);default:return e}},gt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,mt=Object(l.c)({auth:Je,diary:jt,read:vt}),xt=Object(l.e)(mt,gt(Object(l.a)(d.a))),yt=Object(r.jsx)(u.a,{store:xt,children:Object(r.jsx)(s.a,{children:Object(r.jsx)(Le,{})})});i.a.render(yt,document.getElementById("root")),Be()}],[[100,1,2]]]);
//# sourceMappingURL=main.0350f9ef.chunk.js.map