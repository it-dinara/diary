{"version":3,"sources":["store/actions/actionTypes.js","store/actions/auth.js","store/actions/diary.js","store/actions/read.js","containers/DiaryBuilder/DiaryBuilder.module.css","containers/Read/Read.module.css","axios-diary.js","containers/PostsSecond/Posts.module.css","components/Navigation/SideDrawer/SideDrawer.module.css","containers/Start/start.module.css","components/UI/Input/Input.module.css","containers/TitleMenu/Title/Title.module.css","components/Navigation/Toolbar/Toolbar.module.css","containers/Diary/Diary.module.css","components/UI/Button/Button.module.css","components/Navigation/NavigationItems/NavigationItem/NavigationItem.module.css","containers/TitleMenu/TitleMenu.module.css","components/UI/Modal/Modal.module.css","components/UI/Backdrop/Backdrop.module.css","components/UI/Spinner/Spinner.module.css","containers/Auth/Auth.module.css","hoc/Layout/Layout.module.css","components/Logo/Logo.module.css","components/Navigation/NavigationItems/NavigationItems.module.css","components/Navigation/SideDrawer/DrawerToggle/DrawerToggle.module.css","containers/TitleMenu/Title/Title.js","containers/TitleMenu/TitleMenu.js","containers/Diary/Diary.js","components/UI/Backdrop/Backdrop.js","components/UI/Modal/Modal.js","hoc/withErrorHandler/withErrorHandler.js","containers/DiaryBuilder/DiaryBuilder.js","containers/Start/Start.js","components/UI/Spinner/Spinner.js","containers/Read/Read.js","containers/PostsSecond/Posts.js","components/UI/Button/Button.js","components/UI/Input/Input.js","containers/Auth/AuthSecond.js","containers/Auth/Logout/LogoutSecond.js","hoc/_Aux/_Aux.js","assets/images/diary.svg","components/Logo/Logo.js","components/Navigation/NavigationItems/NavigationItem/NavigationItem.js","components/Navigation/NavigationItems/NavigationItems.js","components/Navigation/SideDrawer/DrawerToggle/DrawerToggle.js","components/Navigation/Toolbar/Toolbar.js","components/Navigation/SideDrawer/SideDrawer.js","hoc/Layout/Layout.js","App.js","reportWebVitals.js","store/utility.js","store/reducers/auth.js","store/reducers/diary.js","store/reducers/read.js","index.js"],"names":["AUTH_START","AUTH_SUCCESS","AUTH_FAIL","AUTH_LOGOUT","SET_REDIRECT_PATH","RE_AUTH_SUCCESS","RE_AUTH_FAIL","SET_ACTIVE","SET_TITLE","SET_VALUE","SAVE_NOTE_IN_STATE","NOTE_INIT","SAVE_DIARY_START","SAVE_DIARY_SUCCESS","SAVE_DIARY_FAIL","CLEAR_DIARY_OBJ_TO_EDIT","FETCH_POSTS_START","FETCH_POSTS_SUCCESS","FETCH_POSTS_FAIL","REMOVE_POST_START","REMOVE_POST_SUCCESS","REMOVE_POST_FAIL","REMOVE_NOTE_TO_EDIT","SET_POST_ID","SET_POST_DATA_TO_READ_START","SET_POST_DATA_TO_READ_FAIL","SET_POST_DATA_TO_READ_SUCCESS","authSuccess","token","userId","type","actionTypes","idToken","authFail","error","logout","localStorage","removeItem","reAuth","dispatch","body","getItem","axios","post","then","response","console","log","data","id_token","user_id","expirationDate","Date","getTime","expires_in","setItem","refresh_token","catch","err","auth","email","password","isSignup","authData","returnSecureToken","url","localId","expiresIn","refreshToken","setRedirectPath","path","authCheckState","expirationTime","setTimeout","setTitle","title","saveNoteInState","value","noteInit","clearDiaryObjToEdit","saveDiary","diaryData","axiosInstance","id","diary","name","diaryId","actions","saveDiaryFail","fetchPosts","a","queryParams","get","res","fetchedPosts","removePost","postId","length","delete","removePostFail","setPostId","setPostDataToRead","postData","setPostDataToReadFail","module","exports","instance","create","baseURL","Title","props","className","active","s","join","onClick","clicked","TitleMenu","React","memo","titleArray","useSelector","state","postNote","read","note","template","useState","setActive","useDispatch","useEffect","Object","keys","includes","titleMenu","map","i","event","preventDefault","setTitleHandler","Diary","forwardRef","ref","stateFeelings","diaryObj","textareaVal","setValue","txt1","useRef","current","focus","wrap","minRows","onHeightChange","textarea","onChange","target","onFocus","e","currentTarget","setSelectionRange","backdrop","show","classes","Backdrop","Modal","nextProps","nextState","this","children","modalClosed","style","transform","opacity","Component","withErrorHandler","WrappedComponent","errorConfirmedHandler","setState","reqInterceptor","interceptors","request","use","req","resInterceptor","eject","status","message","postMillsec","millsec","postDate","fullDate","startRemoving","setStartRemoving","redirect","redirectPath","to","modalAlert","textAlign","modal","buttonModal","cancel","removeDiaryHandler","item","removeButton","button","removeBtn","action","container","buttons","saveBtn","key","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minutes","getMinutes","formatDate","num","toString","parse","saveDiaryHandler","history","useHistory","wrapper","replace","plus","vertical","gorizontal","spinner","loader","Read","notes","postName","push","content","Spinner","postItem","editPost","editHandler","dateWrap","getDay","Post","lazy","loading","fetchedPostsRes","flag","setFlag","sort","b","posts","concat","values","indexOf","fallback","start","newNote","panel","search","list","disabled","Button","btnType","input","inputElement","inputClasses","InputElement","invalid","shouldValidate","touched","Invalid","elementType","elementConfig","changed","options","option","displayValue","Input","Label","htmlFor","label","Auth","placeholder","validation","required","isEmail","valid","minLength","controls","setControls","setIsSignup","isAuthenticated","checkValidity","rules","isValid","trim","maxLength","test","isNumeric","formElementsArray","config","form","formElement","controlName","updatedControls","inputChangedHandler","for","errorMessage","onSubmit","Logout","aux","logo","Logo","height","src","burgerLogo","alt","navigationItem","NavigationItem","link","exact","activeClassName","navigationItems","NavigationItems","isAuthentication","drawerToggle","DrawerToggle","toolbar","Toolbar","drawerToggleClicked","DesktopOnly","sideDrawer","attachedClasses","SideDrawer","Close","open","Open","closed","Layout","showSideDrawer","sideDrawerClosedHandler","sideDrawerToggleHandler","prevState","Content","connect","withRouter","router","component","Start","Posts","DiaryBuilder","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","updateObject","oldObject","updatedProperties","initialState","authStart","reAuthSuccess","reAuthFail","reducer","removing","newDate","saveDiaryStart","saveDiarySuccess","fetchPostsStart","fetchPostsFail","fetchPostsSuccess","removePostStart","removePostSuccess","updatedPosts","setPostDataToReadStart","setPostDataToReadSuccess","removePostNote","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","authReducer","diaryReducer","readReducer","store","createStore","applyMiddleware","thunk","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0350f9ef.chunk.js","sourcesContent":["export const AUTH_START = 'AUTH_START';\r\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\r\nexport const AUTH_FAIL = 'AUTH_FAIL';\r\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\r\nexport const SET_REDIRECT_PATH = 'SET_REDIRECT_PATH';\r\nexport const RE_AUTH_SUCCESS = 'RE_AUTH_SUCCESS';\r\nexport const RE_AUTH_FAIL = 'RE_AUTH_FAIL';\r\n\r\n\r\nexport const SET_ACTIVE = 'SET_ACTIVE';\r\nexport const SET_TITLE = 'SET_TITLE';\r\nexport const SET_VALUE = 'SET_VALUE';\r\nexport const SAVE_NOTE_IN_STATE = 'SAVE_NOTE_IN_STATE';\r\nexport const NOTE_INIT = 'NOTE_INIT';\r\nexport const SAVE_DIARY_START = 'SAVE_DIARY_START';\r\nexport const SAVE_DIARY_SUCCESS = 'SAVE_DIARY_SUCCESS';\r\nexport const SAVE_DIARY_FAIL = 'SAVE_DIARY_FAIL';\r\nexport const CLEAR_DIARY_OBJ_TO_EDIT = 'CLEAR_DIARY_OBJ_TO_EDIT';\r\n\r\nexport const FETCH_POSTS_START = 'FETCH_POSTS_START';\r\nexport const FETCH_POSTS_SUCCESS = 'FETCH_POSTS_SUCCESS';\r\nexport const FETCH_POSTS_FAIL = 'FETCH_POSTS_FAIL';\r\n\r\nexport const REMOVE_POST_START = 'REMOVE_POST_START';\r\nexport const REMOVE_POST_SUCCESS = 'REMOVE_POST_SUCCESS';\r\nexport const REMOVE_POST_FAIL = 'REMOVE_POST_FAIL';\r\n\r\nexport const REMOVE_NOTE_TO_EDIT = 'REMOVE_NOTE_TO_EDIT';\r\nexport const SET_POST_ID = 'SET_POST_ID';\r\nexport const SET_POST_DATA_TO_READ_START = 'SET_POST_DATA_TO_READ_START';\r\nexport const SET_POST_DATA_TO_READ_FAIL = 'SET_POST_DATA_TO_READ_FAIL';\r\nexport const SET_POST_DATA_TO_READ_SUCCESS = 'SET_POST_DATA_TO_READ_SUCCESS';\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nimport * as actionTypes from './actionTypes';\r\n\r\nexport const authStart = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    };\r\n};\r\n\r\nexport const authSuccess = (token, userId) => {\r\n    return {\r\n        type: actionTypes.AUTH_SUCCESS,\r\n        idToken: token,\r\n        userId: userId\r\n    };\r\n};\r\n\r\nexport const authFail = (error) => {\r\n    return {\r\n        type: actionTypes.AUTH_FAIL,\r\n        error: error\r\n    };\r\n};\r\n\r\nexport const reAuthSuccess = (token, userId) => {\r\n\treturn {\r\n\t\ttype: actionTypes.RE_AUTH_SUCCESS,\r\n\t\tidToken: token,\r\n\t\tuserId: userId\r\n\t};\r\n};\r\n\r\nexport const reAuthFail = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.RE_AUTH_FAIL,\r\n\t\terror: error\r\n\t};\r\n};\r\n\r\nexport const logout = () => {\r\n\tlocalStorage.removeItem('token');\r\n\tlocalStorage.removeItem('refreshToken');\r\n\tlocalStorage.removeItem('expirationDate');\r\n\tlocalStorage.removeItem('userId');\r\n\treturn {\r\n\t\ttype: actionTypes.AUTH_LOGOUT,\r\n\t}\r\n}\r\n\r\nexport const checkAuthTimeout = (expirationTime) => {\r\n\tconsole.log('checkAuthTimeout', expirationTime)\r\n\treturn dispatch => {\r\n\t\tsetTimeout(() => {\r\n\t\t\treturn dispatch(reAuth())\r\n\t\t}\r\n\t\t, expirationTime)\r\n\t}\r\n}\r\n\r\nexport const reAuth = () => {\r\n\treturn dispatch => {\r\n\t\tconst refreshToken = localStorage.getItem('refreshToken');\r\n\t\tconst body = 'grant_type=refresh_token&refresh_token=' + refreshToken\r\n\t\tlet url = 'https://securetoken.googleapis.com/v1/token?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk';\r\n\r\n\t\taxios.post(url, body)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log('----------------------- \\n res ReAuth', response)\r\n\t\t\t\tdispatch(authSuccess(response.data.id_token, response.data.user_id));\r\n\r\n\t\t\t\tlocalStorage.removeItem('token');\r\n\t\t\t\tlocalStorage.removeItem('refreshToken');\r\n\t\t\t\tlocalStorage.removeItem('expirationDate');\r\n\t\t\t\tlocalStorage.removeItem('userId');\r\n\r\n\t\t\t\tconst expirationDate = new Date(new Date().getTime() + response.data.expires_in * 1000);\r\n\t\t\t\tlocalStorage.setItem('token', response.data.id_token);\r\n\t\t\t\tlocalStorage.setItem('refreshToken', response.data.refresh_token);\r\n\t\t\t\tlocalStorage.setItem('expirationDate', expirationDate);\r\n\t\t\t\tlocalStorage.setItem('userId', response.data.user_id);\r\n\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log('----------------------- \\n err ReAuth', err)\r\n\t\t\t\tdispatch(authFail(err))\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\n\r\nexport const auth = (email, password, isSignup) => {\r\n    return dispatch => {\r\n        dispatch(authStart());\r\n        const authData = {\r\n            email: email,\r\n            password: password,\r\n            returnSecureToken: true\r\n        };\r\n        let url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk';\r\n        if (!isSignup) {\r\n            url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCHwkentplNqp5vvQlz_uVpf4nVZxciYqk';\r\n        }\r\n        axios.post(url, authData)\r\n            .then(response => {\r\n                console.log('response', response);\r\n                console.log('userId', response.data.localId);\r\n\t\t\t\tconsole.log('response.data.expiresIn', response.data.expiresIn);\r\n\t\t\t\t\r\n\t\t\t\tconst expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\r\n\t\t\t\tconsole.log('expirationDate auth', expirationDate)\r\n\t\t\t\tlocalStorage.setItem('token', response.data.idToken);\r\n\t\t\t\tlocalStorage.setItem('refreshToken', response.data.refreshToken);\r\n\t\t\t\tlocalStorage.setItem('expirationDate', expirationDate);\r\n\t\t\t\tlocalStorage.setItem('userId', response.data.localId);\r\n\r\n\t\t\t\tdispatch(authSuccess(response.data.idToken, response.data.localId));\r\n\t\t\t\t// dispatch(checkAuthTimeout(response.data.expiresIn * 1000));\r\n\r\n            })\r\n            .catch(err => {\r\n                console.log('err', err.response);\r\n                dispatch(authFail(err.response));\r\n            });\r\n    };\r\n};\r\n\r\n\r\n\r\nexport const setRedirectPath = (path) => {\r\n\treturn {\r\n\t\ttype: actionTypes.SET_REDIRECT_PATH,\r\n\t\tpath: path\r\n\t}\r\n}\r\n\r\nexport const authCheckState = () => {\r\n\treturn dispatch => {\r\n\t\tconst token = localStorage.getItem('token');\r\n\t\tif(!token) {\r\n\t\t\tdispatch(reAuth())\r\n\t\t} else {\r\n\t\t\tconst expirationDate = new Date(localStorage.getItem('expirationDate'));\r\n\t\t\tif (expirationDate > new Date()) {\r\n\t\t\t\tconst userId = localStorage.getItem('userId');\r\n\t\t\t\tconsole.log( 'expirationDate authCheckState', expirationDate.getTime() - new Date().getTime() )\r\n\t\t\t\t\r\n\t\t\t\tdispatch(authSuccess(token, userId));\r\n\t\t\t\tdispatch(checkAuthTimeout(expirationDate.getTime() - new Date().getTime()))\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(reAuth());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import axiosInstance from '../../axios-diary.js';\r\nimport * as actionTypes from './actionTypes';\r\nimport axios from 'axios';\r\nimport * as actions from \"./index\";\r\n\r\n\r\nexport const setActive = (active) => {\r\n    return {\r\n        type: actionTypes.SET_ACTIVE,\r\n        active: active\r\n    }\r\n}\r\n\r\nexport const setTitle = (title) => {\r\n    return {\r\n        type: actionTypes.SET_TITLE,\r\n        title: title\r\n    }\r\n}\r\n\r\nexport const setValue = (value) => {\r\n    return {\r\n        type: actionTypes.SET_VALUE,\r\n        value: value\r\n    }\r\n}\r\n\r\nexport const saveNoteInState = (title, value) => {\r\n    return {\r\n        type: actionTypes.SAVE_NOTE_IN_STATE,\r\n        title: title,\r\n        value: value,\r\n    }\r\n}\r\n\r\nexport const noteInit = () => {\r\n    return {\r\n        type: actionTypes.NOTE_INIT\r\n    }\r\n}\r\n\r\nexport const clearDiaryObjToEdit = () => {\r\n    return {\r\n        type: actionTypes.CLEAR_DIARY_OBJ_TO_EDIT\r\n    }\r\n}\r\n\r\nexport const saveDiaryStart = () => {\r\n    return {\r\n        type: actionTypes.SAVE_DIARY_START\r\n    }\r\n}\r\n\r\nexport const saveDiaryFail = (error) => {\r\n    return {\r\n        type: actionTypes.SAVE_DIARY_FAIL,\r\n        error\r\n    }\r\n}\r\n\r\nexport const saveDiarySuccess = (id, diary) => {\r\n    return {\r\n        type: actionTypes.SAVE_DIARY_SUCCESS,\r\n        diaryId: id,\r\n        diary,\r\n    }\r\n}\r\n\r\nexport const saveDiary = (diaryData, token) => {\r\n    return dispatch => {\r\n        dispatch(saveDiaryStart());\r\n        axiosInstance.post('/journal.json?auth=' + token, diaryData)\r\n            .then(response => {\r\n                console.log('response save', response)\r\n                dispatch(saveDiarySuccess(response.data.name, diaryData))\r\n                dispatch(actions.setRedirectPath('/posts'))\r\n            })\r\n            .catch(error => {\r\n                dispatch(saveDiaryFail(error))\r\n            })\r\n    }\r\n}\r\n\r\nexport const fetchPostsSuccess = (fetchedPosts) => {\r\n    return {\r\n        type: actionTypes.FETCH_POSTS_SUCCESS,\r\n        fetchedPosts\r\n    }\r\n}\r\n\r\nexport const fetchPostsFail = (error) => {\r\n    return {\r\n        type: actionTypes.FETCH_POSTS_FAIL,\r\n        error\r\n    }\r\n}\r\n\r\nexport const fetchPostsStart = () => {\r\n    return {\r\n        type: actionTypes.FETCH_POSTS_START\r\n    }\r\n}\r\n\r\n// export const fetchPosts = (token, userId) => {\r\n//     return dispatch => {\r\n//         dispatch(fetchPostsStart());\r\n//\r\n//         const queryParams = '?auth=' + token + '&orderBy=\"userId\"&equalTo=\"' + userId + '\"';\r\n//         axiosInstance.get('/journal.json' + queryParams)\r\n//         .then(res => {\r\n//         // console.log('res', res)\r\n//             console.log('res.data', res.data)\r\n//             dispatch(fetchPostsSuccess(res.data))\r\n//             dispatch(actions.setRedirectPath(null))\r\n//         })\r\n//         .catch(error => {\r\n//             dispatch(fetchPostsFail(error))\r\n//         })\r\n//     }\r\n// }\r\n\r\nexport const fetchPosts = (token, userId) => {\r\n    return async dispatch => {\r\n        dispatch(fetchPostsStart());\r\n        const queryParams = '?auth=' + token + '&orderBy=\"userId\"&equalTo=\"' + userId + '\"';\r\n\r\n        try {\r\n\r\n            const res = await axiosInstance.get('/journal.json' + queryParams)\r\n            console.log('res.data', res.data)\r\n            dispatch(fetchPostsSuccess(res.data))\r\n            dispatch(actions.setRedirectPath(null))\r\n\r\n        } catch (e) {\r\n            dispatch(fetchPostsFail(e))\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const removePostStart = () => {\r\n    return {\r\n        type: actionTypes.REMOVE_POST_START,\r\n    }\r\n}\r\n\r\nexport const removePostSuccess = (postId) => {\r\n    return {\r\n        type: actionTypes.REMOVE_POST_SUCCESS,\r\n        postId\r\n    }\r\n}\r\n\r\nexport const removePostFail = (error) => {\r\n    return {\r\n        type: actionTypes.REMOVE_POST_FAIL,\r\n        error\r\n    }\r\n}\r\n\r\nexport const removePost = (token, postId) => {\r\n    if (!postId.length) {\r\n        console.log('Did not delete, removePost postId not correct', postId)\r\n        return null;\r\n    }\r\n    return dispatch => {\r\n        dispatch(removePostStart())\r\n        const queryParams = '?auth=' + token;\r\n        axios.delete('https://diary-a95bf.firebaseio.com/journal/' + postId + '.json' + queryParams)\r\n        .then(res => {\r\n            console.log('REDUX postId', postId)\r\n            // dispatch(removePostSuccess(postId))\r\n            dispatch(actions.setRedirectPath('/posts'))\r\n        })\r\n        .catch(error => {\r\n            dispatch(removePostFail(error))\r\n        })\r\n    }\r\n}","import * as actionTypes from './actionTypes';\r\nimport axios from \"axios\";\r\nimport * as actions from \"./index\";\r\n\r\n\r\nexport const removePostNote = (postNote) => {\r\n\treturn {\r\n\t\ttype: actionTypes.REMOVE_NOTE_TO_EDIT,\r\n\t\tpostNote: postNote,\r\n\t}\r\n}\r\n\r\nexport const setPostId = (postId) => {\r\n\treturn {\r\n\t\ttype: actionTypes.SET_POST_ID,\r\n\t\tpostId: postId,\r\n\t}\r\n}\r\n\r\nexport const setPostDataToReadStart = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.SET_POST_DATA_TO_READ_START\r\n\t}\r\n}\r\n\r\nexport const setPostDataToReadSuccess = (postData) => {\r\n\treturn {\r\n\t\ttype: actionTypes.SET_POST_DATA_TO_READ_SUCCESS,\r\n\t\tpostData\r\n\t}\r\n}\r\n\r\nexport const setPostDataToReadFail = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.SET_POST_DATA_TO_READ_FAIL,\r\n\t\terror\r\n\t}\r\n}\r\n\r\nexport const setPostDataToRead = (token, postId) => {\r\n\treturn dispatch => {\r\n\t\tdispatch(setPostDataToReadStart())\r\n\t\tconst queryParams = '?auth=' + token;\r\n\t\taxios.get('https://diary-a95bf.firebaseio.com/journal/' + postId + '.json' + queryParams)\r\n\t\t.then(res => {\r\n\t\t\tdispatch(setPostDataToReadSuccess(res.data))\r\n\t\t\tdispatch(actions.setRedirectPath(null))\r\n\t\t\tconsole.log('READUX READ RES', res)\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tdispatch(setPostDataToReadFail(error))\r\n\t\t})\r\n\t}\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DiaryBuilder_container__waIvh\",\"buttons\":\"DiaryBuilder_buttons__VY0wE\",\"button\":\"DiaryBuilder_button__2RX41\",\"removeBtn\":\"DiaryBuilder_removeBtn__2b3yj\",\"saveBtn\":\"DiaryBuilder_saveBtn__qly6N\",\"buttonModal\":\"DiaryBuilder_buttonModal__2TFaK\",\"cancel\":\"DiaryBuilder_cancel__2QfSk\",\"modal\":\"DiaryBuilder_modal__33dkn\",\"removePost\":\"DiaryBuilder_removePost__1AxzU\",\"diary\":\"DiaryBuilder_diary__3Fa8Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Read_wrapper__nFYlo\",\"post\":\"Read_post__1qQx9\",\"name\":\"Read_name__3LoiP\",\"content\":\"Read_content__P5kjF\",\"container\":\"Read_container__O18C3\",\"dateWrap\":\"Read_dateWrap__2DTX_\",\"date\":\"Read_date__1oCyz\",\"day\":\"Read_day__2xFhF\",\"editPost\":\"Read_editPost__24twU\",\"cover\":\"Read_cover__3DmCj\",\"read\":\"Read_read__25AKb\"};","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://diary-a95bf.firebaseio.com/'\r\n});\r\n\r\nexport default instance;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonModal\":\"Posts_buttonModal__1FlBS\",\"cancel\":\"Posts_cancel__1XBRl\",\"modal\":\"Posts_modal__2wr99\",\"removePost\":\"Posts_removePost__2hT6V\",\"container\":\"Posts_container__qUh2w\",\"newNote\":\"Posts_newNote__v6ma0\",\"search\":\"Posts_search__eS_sr\",\"panel\":\"Posts_panel__3pDcQ\",\"list\":\"Posts_list__1deu5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideDrawer\":\"SideDrawer_SideDrawer__qGHu1\",\"Open\":\"SideDrawer_Open__kTNRr\",\"Close\":\"SideDrawer_Close__2d78w\",\"Logo\":\"SideDrawer_Logo__3JQ6_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vertical\":\"start_vertical__1wRj8\",\"gorizontal\":\"start_gorizontal__33t_5\",\"plus\":\"start_plus__ZYKcj\",\"wrapper\":\"start_wrapper__1Q_JY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__1uNtk\",\"Label\":\"Input_Label__1Z_2h\",\"InputElement\":\"Input_InputElement__3HPvS\",\"Invalid\":\"Input_Invalid__2Fq0P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__n3sn1\",\"active\":\"Title_active__1NSJ5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toolbar\":\"Toolbar_Toolbar__3S0e6\",\"Logo\":\"Toolbar_Logo__2y_Xk\",\"DesktopOnly\":\"Toolbar_DesktopOnly__2orJa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"Diary_textarea__3HM62\",\"wrap\":\"Diary_wrap__1xSGc\",\"form\":\"Diary_form__3iWKO\",\"name\":\"Diary_name__Wvp3K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3GEbe\",\"Success\":\"Button_Success__x83ai\",\"Danger\":\"Button_Danger__CQBPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavigationItem\":\"NavigationItem_NavigationItem__1Ojyr\",\"active\":\"NavigationItem_active__2DTKK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleMenu\":\"TitleMenu_titleMenu__wKkC2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__x-1cz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__2f0nG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Spinner_loader__2F1J7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__DwcC_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"Layout_Content__ED2tP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__3w4rS\",\"LogoText\":\"Logo_LogoText__2_B7_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavigationItems\":\"NavigationItems_NavigationItems__jhOoS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DrawerToggle\":\"DrawerToggle_DrawerToggle__3rpdo\"};","import React from 'react'\r\nimport s from './Title.module.css'\r\n\r\n\r\n\r\nfunction Title(props) {\r\n\treturn (\r\n\t\t\t\t<li\r\n\t\t\t\tclassName={props.active ? [s.title, s.active].join(' ') : s.title}\r\n\t\t\t\tonClick={props.clicked}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t{props.name}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\r\n\t\t)\r\n\t}\r\n\r\nexport default Title","import React, {useState, useEffect} from 'react'\r\nimport s from './TitleMenu.module.css'\r\nimport Title from './Title/Title'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport * as actions from '../../store/actions/index'\r\n\r\n\r\n\r\nconst TitleMenu = React.memo(props => {\r\n\tconst titleArray = useSelector(state => state.diary.titleArray);\r\n\tconst postNote = useSelector(state => state.read.postData.note)\r\n\tconst postId = useSelector(state => state.read.postId)\r\n\tconst template = useSelector(state => state.diary.template);\r\n\tconst [active, setActive] = useState(false)\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst setTitleHandler = (event, title, id) => {\r\n\t\tevent.preventDefault()\r\n\t\tsetActive(active => { return {[title]: !active[title]} })\r\n\t\treturn dispatch(actions.setTitle(title))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!postId) {\r\n\t\t\tdispatch(actions.setTitle(titleArray[0].name))\r\n\t\t\tsetActive({[titleArray[0].name]: true})\r\n\t\t} else {\r\n\t\t\tfor(let title of template) {\r\n\t\t\t\tif(Object.keys(postNote).includes(title)) {\r\n\t\t\t\t\tconsole.log('template title', title)\r\n\t\t\t\t\tdispatch(actions.setTitle(title))\r\n\t\t\t\t\tsetActive({[title]: true})\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, [postId,titleArray,template,postNote,dispatch])\r\n\r\n\treturn (\r\n\t\t\t<ul className={s.titleMenu}>\r\n\t\t\t\t{titleArray.map((title, i) => (\r\n\t\t\t\t\t<Title\r\n\t\t\t\t\tkey={title.id}\r\n\t\t\t\t\tname={title.name}\r\n\t\t\t\t\tclicked={(event) => setTitleHandler(event, title.name, title.id)}\r\n\t\t\t\t\tactive={active[title.name]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t)\r\n\t}\r\n)\t\r\n\r\nexport default TitleMenu","import React, {useEffect, useState, useRef} from 'react'\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport s from './Diary.module.css'\r\nimport * as actions from '../../store/actions/index'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\n\r\n\r\nconst Diary = React.forwardRef((props, ref) => {\r\n\r\n    const title = useSelector(state => state.diary.title)\r\n    const stateFeelings = useSelector(state => state.diary.diaryObj)\r\n    //отрисовка текста в Textarea\r\n    //Например: context: 'Привет'\r\n    let textareaVal = stateFeelings[title] ? stateFeelings[title] : '';\r\n    const [value, setValue] = useState(textareaVal)\r\n\r\n    const dispatch = useDispatch();\r\n    const txt1 = useRef(null);\r\n    useEffect(() => {\r\n        //создание поста\r\n        dispatch(actions.saveNoteInState(title, value))\r\n        console.log('saveNoteInState value', value)\r\n        txt1.current.focus();\r\n    }, [title, value, dispatch])\r\n\r\n\r\n    return (\r\n        <div className={s.wrap}>\r\n            <TextareaAutosize\r\n                name='textValue'\r\n                minRows={15}\r\n                onHeightChange={() => {\r\n                }}\r\n                className={s.textarea}\r\n                value={value}\r\n                onChange={(event) => {\r\n                    setValue(event.target.value)\r\n                }}\r\n                ref={txt1}\r\n                onFocus={(e)=>e.currentTarget.setSelectionRange(e.currentTarget.value.length, e.currentTarget.value.length)}\r\n            />\r\n        </div>\r\n\r\n    )\r\n})\r\n\r\nexport default Diary","import React from 'react';\r\n\r\nimport classes from './Backdrop.module.css';\r\n\r\nconst backdrop = (props) => (\r\n    props.show ? <div className={classes.Backdrop} onClick={props.clicked}></div> : null\r\n);\r\n\r\nexport default backdrop;","import React, { Component } from 'react';\r\n\r\nimport classes from './Modal.module.css';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\n\r\nclass Modal extends Component {\r\n\r\n    shouldComponentUpdate ( nextProps, nextState ) {\r\n        return nextProps.show !== this.props.show || nextProps.children !== this.props.children;\r\n    }\r\n\r\n    UNSAFE_componentWillUpdate () {\r\n        // console.log('[Modal] WillUpdate');\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <>\r\n                <Backdrop show={this.props.show} clicked={this.props.modalClosed} />\r\n                <div\r\n                    className={classes.Modal}\r\n                    style={{\r\n                        transform: this.props.show ? 'translateY(0)' : 'translateY(-100vh)',\r\n                        opacity: this.props.show ? '1' : '0'\r\n                    }}>\r\n                    {this.props.children}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, { Component } from 'react';\r\n\r\nimport Modal from '../../components/UI/Modal/Modal';\r\n\r\nconst withErrorHandler = ( WrappedComponent, axios ) => {\r\n    return class extends Component {\r\n        state = {\r\n            error: null\r\n        }\r\n\r\n        componentDidMount () {\r\n            this.reqInterceptor = axios.interceptors.request.use( req => {\r\n                this.setState( { error: null } );\r\n                return req;\r\n            } );\r\n            this.resInterceptor = axios.interceptors.response.use( res => res, error => {\r\n                this.setState( { error: error } );\r\n            } );\r\n        }\r\n\r\n        componentWillUnmount () {\r\n            axios.interceptors.request.eject( this.reqInterceptor );\r\n            axios.interceptors.response.eject( this.resInterceptor );\r\n        }\r\n\r\n        errorConfirmedHandler = () => {\r\n            this.setState( { error: null } );\r\n        }\r\n\r\n        render () {\r\n            return (\r\n                <>\r\n                    {console.log('this.state.error', this.state.error)}\r\n                    <Modal\r\n                        show={this.state.error}\r\n                        modalClosed={this.errorConfirmedHandler}>\r\n                        {this.state.error ? \r\n                            (this.state.error.response.status === 401 ? 'please log in' : this.state.error.message) : null\r\n                        }\r\n                    </Modal>\r\n                    <WrappedComponent {...this.props} />\r\n                </>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default withErrorHandler;","import React, {useState} from 'react'\r\nimport TitleMenu from '../TitleMenu/TitleMenu'\r\nimport Diary from '../Diary/Diary'\r\nimport s from './DiaryBuilder.module.css'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport * as actions from '../../store/actions/index'\r\nimport axios from '../../axios-diary.js'\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\n\r\n\r\nfunction DiaryBuilder() {\r\n    const title = useSelector(state => state.diary.title);\r\n    const titleArray = useSelector(state => state.diary.titleArray);\r\n    const diaryObj = useSelector(state => state.diary.diaryObj);\r\n    const {token, userId} = useSelector(state => state.auth)\r\n    //Переменные при редактировании поста\r\n    const postId = useSelector(state => state.read.postId)\r\n    const postMillsec = useSelector(state => state.read.postData.millsec)\r\n    const postDate = useSelector(state => state.read.postData.fullDate)\r\n    const dispatch = useDispatch();\r\n    const [startRemoving, setStartRemoving] = useState(false)\r\n    const redirectPath = useSelector(state => state.auth.redirectPath)\r\n\r\n    // useEffect(() => {\r\n    //     dispatch(actions.setRedirectPath(null))\r\n    // }, [dispatch])\r\n\r\n    const saveDiaryHandler = (event) => {\r\n        event.preventDefault()\r\n        //При редактировании, удаляется старый пост и сохраняется новый, со старой датой\r\n        if (postId) {\r\n            dispatch(actions.removePost(token, postId))\r\n        }\r\n\r\n        //Проверка на пустой пост, такой пост не сохраняется\r\n        let note = {};\r\n        for (let key in diaryObj) {\r\n            if (diaryObj[key]) {\r\n                note[key] = diaryObj[key]\r\n                console.log('note', note)\r\n            }\r\n        }\r\n        //Дата\r\n        let date = new Date();\r\n        console.log('date', date)\r\n        let year = date.getFullYear();\r\n        let month = date.getMonth();\r\n        let day = date.getDate();\r\n        let hour = date.getHours();\r\n        let minutes = date.getMinutes();\r\n\r\n        const formatDate = (num) => {\r\n            let res;\r\n            if (num.toString().length < 2) {\r\n                res = '0' + num\r\n            } else {\r\n                res = num\r\n            }\r\n            return res\r\n        }\r\n\r\n        let fullDate = day + '.' + formatDate(month + 1) + '.' + year + ' ' + formatDate(hour) + ':' + formatDate(minutes);\r\n        let millsec = Date.parse(date);\r\n        console.log('postDate', postDate)\r\n        console.log('postMillsec', postMillsec)\r\n        const diaryData = {\r\n            note: note,\r\n            userId: userId,\r\n            fullDate: (postId && postDate) ? postDate : fullDate,\r\n            millsec: (postId && postMillsec) ? postMillsec : millsec,\r\n        }\r\n\r\n        if (Object.keys(note).length > 0) {\r\n            dispatch(actions.saveDiary(diaryData, token))\r\n        }\r\n    }\r\n\r\n    const removeDiaryHandler = (event) => {\r\n        event.preventDefault()\r\n\r\n        if (postId) {\r\n            dispatch(actions.removePost(token, postId))\r\n        }\r\n    }\r\n\r\n    let redirect = redirectPath && <Redirect to={'/posts'}/>\r\n\r\n    let modalAlert = (\r\n        <Modal show={startRemoving} modalClosed={() => {setStartRemoving(false)}}>\r\n            {console.log('removing', startRemoving)}\r\n            <p style={{textAlign: 'center'}}>Are you sure you want to delete the post?</p>\r\n\r\n            <div className={s.modal}>\r\n                <button className={[s.buttonModal, s.cancel].join(' ')}\r\n                        onClick={(event) => {\r\n                            event.preventDefault();\r\n                            setStartRemoving(false)}}\r\n                >\r\n                    cancel\r\n                </button>\r\n                <button className={[s.buttonModal, s.removePost].join(' ')}\r\n                        onClick={(event) => {\r\n                            removeDiaryHandler(event);\r\n                            setStartRemoving(false)\r\n                        }}\r\n                >\r\n                    delete\r\n                </button>\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n\r\n    //в результате setTitle показывается соответствующий Textarea\r\n    let diary = null;\r\n    for (let item of titleArray) {\r\n        if (title === item.name) {\r\n            diary = <Diary\r\n                key={item.name}\r\n            />\r\n        }\r\n    }\r\n\r\n    let removeButton = null;\r\n    if(postId) {\r\n        removeButton = (\r\n            <button\r\n                className={[s.button, s.removeBtn].join(' ')}\r\n                onClick={(event) => {\r\n                    event.preventDefault();\r\n                    setStartRemoving(true)  }}>\r\n                Delete\r\n            </button>\r\n        )\r\n    }\r\n    return (\r\n\r\n        <form action=\"\">\r\n            <div className={s.container}>\r\n                <div className={s.buttons}>\r\n                    <button\r\n                        className={[s.button, s.saveBtn].join(' ')}\r\n                        onClick={(event) => saveDiaryHandler(event)}>\r\n                        Save\r\n                    </button>\r\n                    {removeButton}\r\n\r\n                </div>\r\n                <div className={s.diary}>\r\n                    <TitleMenu />\r\n                    {diary}\r\n                </div>\r\n                {modalAlert}\r\n                {redirect}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default withErrorHandler(DiaryBuilder, axios)","import s from './start.module.css'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport * as actions from '../../store/actions/index'\r\nimport axios from '../../axios-diary.js'\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\r\n\r\n\r\nfunction Start() {\r\n\tlet history = useHistory();\r\n\tlet dispatch = useDispatch();\r\n\tconst redirect = useSelector(state => state.diary.redirect)\r\n\tconst redirectHandler = () => {\r\n\t\tdispatch(actions.noteInit())\r\n\t\thistory.replace('/')\r\n\t\tconsole.log('redirect', redirect)\r\n\t}\r\n\treturn (\r\n\t\t<div className={s.wrapper} onClick={redirectHandler}>\r\n\t\t\t<div className={s.plus}>\r\n\t\t\t\t<div className={s.vertical}></div>\r\n\t\t\t\t<div className={s.gorizontal}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default withErrorHandler(Start, axios)","import React from 'react';\r\n\r\nimport s from './Spinner.module.css';\r\n\r\nconst spinner = () => (\r\n    <div className={s.loader}>\r\n        <div>Loading...</div>\r\n    </div>\r\n);\r\n\r\nexport default spinner;","import {useSelector, useDispatch} from 'react-redux';\r\nimport s from './Read.module.css';\r\nimport {useHistory} from 'react-router-dom';\r\nimport * as actions from '../../store/actions/index';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\n\r\n\r\nconst Read = () => {\r\n\r\n    const postData = useSelector(state => state.read.postData)\r\n    // console.log('postData', postData)\r\n    const history = useHistory()\r\n    const dispatch = useDispatch()\r\n\r\n    const editHandler = () => {\r\n        //здесь из note пост переходит в объект при написании поста - diaryObj\r\n        // dispatch(actions.setRedirectPath(null))\r\n        for(let title in postNote) {\r\n            dispatch(actions.saveNoteInState(title, postNote[title]))\r\n        }\r\n        history.push('/')\r\n    }\r\n\r\n    const days = [\r\n        'Воскресенье',\r\n        'Понедельник',\r\n        'Вторник',\r\n        'Среда',\r\n        'Четверг',\r\n        'Пятница',\r\n        'Суббота'\r\n    ];\r\n    const template = useSelector(state => state.diary.template);\r\n    const notes = [];\r\n    let postNote = null;\r\n    if(postData) {\r\n        postNote = postData.note;\r\n        console.log('postNote', postNote)\r\n        for (let postName of template) {\r\n            if (postNote[postName]) {\r\n                notes.push({\r\n                    name: postName,\r\n                    content: postNote[postName]\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    let post = Spinner;\r\n    if(postData) {\r\n        console.log('notes', notes)\r\n        const postItem = notes.map((item, i) => (\r\n            <div className={s.container} key={i}>\r\n                <p className={s.name}>{item.name}</p>\r\n                <p className={s.content}>{item.content}</p>\r\n            </div>\r\n        ))\r\n        post = <>\r\n            <div className={s.wrapper}>\r\n                <div className={s.post}>\r\n                    <button className={s.editPost}\r\n                            onClick={() => editHandler()}\r\n                    >edit\r\n                    </button>\r\n                    <div className={s.read}>\r\n                        <div className={s.dateWrap}>\r\n                            <p className={[s.date, s.day].join(' ')}>{days[new Date(postData.millsec).getDay()]}</p>\r\n                            <p className={s.date}>{postData.fullDate}</p>\r\n                        </div>\r\n                        {postItem}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    }\r\n\r\n    return (\r\n            postData ? post : <Spinner/>\r\n    )\r\n};\r\n\r\nexport default Read;","import React, {useEffect, useState, Suspense} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport s from './Posts.module.css';\r\nimport * as actions from '../../store/actions/index'\r\nimport Spinner from '../../components/UI/Spinner/Spinner'\r\nimport axios from '../../axios-diary.js'\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\r\nconst Post = React.lazy(() => import('./Post/Post'))\r\n\r\n\r\nconst Posts = () => {\r\n    const {token, userId} = useSelector(state => state.auth)\r\n    const {loading, fetchedPostsRes} = useSelector(state => state.diary)\r\n    const dispatch = useDispatch();\r\n    const [value, setValue] = useState('')\r\n\r\n    useEffect(() => {\r\n        dispatch(actions.saveNoteInState(null))\r\n        dispatch(actions.setPostId(null))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        dispatch(actions.fetchPosts(token, userId))\r\n\r\n    }, [token, userId, dispatch])\r\n\r\n    let res = []\r\n    for (let key in fetchedPostsRes) {\r\n        if (fetchedPostsRes[key].millsec) {\r\n            res.push(fetchedPostsRes[key])\r\n        }\r\n    }\r\n    const [flag, setFlag] = useState(false)\r\n    if (!flag) {\r\n        res.sort((a, b) => b.millsec - a.millsec)\r\n    } else {\r\n        res.sort((a, b) => a.millsec - b.millsec)\r\n    }\r\n\r\n    const sortHandler = () => {\r\n        setFlag(!flag)\r\n    }\r\n\r\n    let posts = <Spinner/>;\r\n    if (!loading) {\r\n        posts = res.map(post => {\r\n            if (value === '' || Object.keys(post.note).concat(Object.values(post.note)).join(' ').indexOf(value) >= 0) {\r\n                return (\r\n                    <Suspense fallback={<div>Loading...</div>} key={post.id}>\r\n                        <Post\r\n                            note={post.note}\r\n                            fullDate={post.fullDate}\r\n                            postId={post.id}\r\n                            millsec={post.millsec}\r\n                        />\r\n                    </Suspense>\r\n                )\r\n            } return null\r\n        })\r\n    }\r\n\r\n\r\n    const history = useHistory();\r\n    const makeNewNoteHandler = () => {\r\n        //очистка стейта от удалёного поста\r\n        dispatch(actions.noteInit())\r\n        history.push('/')\r\n    }\r\n\r\n    const start = (\r\n        <button\r\n            className={s.newNote}\r\n            onClick={(event) => {\r\n                makeNewNoteHandler(event)\r\n            }}\r\n        >\r\n            New note\r\n        </button>\r\n    )\r\n\r\n    return <div className={s.container}>\r\n        <div className={s.panel}>\r\n            {start}\r\n            <div className={s.search}>\r\n                <button onClick={sortHandler}>{flag ? '↓↑' : '↑↓'}</button>\r\n                <input\r\n                    type='text'\r\n                    value={value}\r\n                    onChange={(event) => {\r\n                        console.log('val', event.target.value)\r\n                        setValue(event.target.value)\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n\r\n        <div className={s.list}>\r\n            {posts}\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport default withErrorHandler(Posts, axios);","import React from 'react';\r\n\r\nimport classes from './Button.module.css';\r\n\r\nconst button = (props) => (\r\n    <button\r\n        disabled={props.disabled}\r\n        className={[classes.Button, classes[props.btnType]].join(' ')}\r\n        onClick={props.clicked}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t</button>\r\n);\r\n\r\nexport default button;","import React from 'react';\r\n\r\nimport classes from './Input.module.css';\r\n\r\nconst input = ( props ) => {\r\n    let inputElement = null;\r\n\tconst inputClasses = [classes.InputElement];\r\n\r\n    if (props.invalid && props.shouldValidate && props.touched) {\r\n        inputClasses.push(classes.Invalid);\r\n    }\r\n\r\n    switch ( props.elementType ) {\r\n        case ( 'input' ):\r\n            inputElement = <input\r\n                className={inputClasses.join(' ')}\r\n                {...props.elementConfig}\r\n                id={props.id}\r\n                value={props.value}\r\n                onChange={props.changed} />;\r\n            break;\r\n        case ( 'textarea' ):\r\n            inputElement = <textarea\r\n                className={inputClasses.join(' ')}\r\n                {...props.elementConfig}\r\n                value={props.value}\r\n                onChange={props.changed} />;\r\n            break;\r\n        case ( 'select' ):\r\n            inputElement = (\r\n                <select\r\n                    className={inputClasses.join(' ')}\r\n                    value={props.value}\r\n                    onChange={props.changed}>\r\n                    {props.elementConfig.options.map(option => (\r\n                        <option key={option.value} value={option.value}>\r\n                            {option.displayValue}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            );\r\n            break;\r\n        default:\r\n            inputElement = <input\r\n                className={inputClasses.join(' ')}\r\n                {...props.elementConfig}\r\n                value={props.value}\r\n                onChange={props.changed} />;\r\n    }\r\n\r\n    return (\r\n        <div className={classes.Input}>\r\n            <label className={classes.Label} htmlFor={props.id}>{props.label}</label>\r\n            {inputElement}\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default input;","import React, { useState } from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport {Redirect, useHistory} from 'react-router-dom'\r\n\r\nimport Button from '../../components/UI/Button/Button'\r\nimport Input from '../../components/UI/Input/Input'\r\nimport Spinner from '../../components/UI/Spinner/Spinner'\r\n\r\nimport classes from './Auth.module.css'\r\nimport * as actions from '../../store/actions/index'\r\n\r\n\r\nconst Auth = () => {\r\n\r\n\tconst [controls, setControls] = useState({\r\n\t\temail: {\r\n\t\t\telementType: 'input',\r\n\t\t\telementConfig: {\r\n\t\t\t\ttype: 'email',\r\n\t\t\t\tplaceholder: 'Mail Address'\r\n\t\t\t},\r\n\t\t\tvalue: '',\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tisEmail: true\r\n\t\t\t},\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tid: 'email',\r\n\t\t},\r\n\t\tpassword: {\r\n\t\t\telementType: 'input',\r\n\t\t\telementConfig: {\r\n\t\t\t\ttype: 'password',\r\n\t\t\t\tplaceholder: 'Password'\r\n\t\t\t},\r\n\t\t\tvalue: '',\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminLength: 6,\r\n\t\t\t},\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tid: 'password',\r\n\t\t},\r\n\t})\r\n\r\n\tconst [isSignup, setIsSignup] = useState(false)\r\n\tconst loading = useSelector(state => state.auth.loading)\r\n\tconst error = useSelector(state => state.auth.error)\r\n\tconst isAuthenticated = useSelector(state => state.auth.token)\r\n\tconst redirectPath = useSelector(state => state.auth.redirectPath)\r\n\tconst dispatch = useDispatch()\r\n\t// useEffect(()=>{\r\n\t// \tconsole.log('setRedirectPath')\r\n\t// \tdispatch(actions.setRedirectPath('/start'))\r\n\t// }, [])\r\n\r\n\tconst checkValidity = (value, rules) => {\r\n\t\tlet isValid = true;\r\n\t\tif (!rules) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (rules.required) {\r\n\t\t\tisValid = value.trim() !== '' && isValid;\r\n\t\t}\r\n\r\n\t\tif (rules.minLength) {\r\n\t\t\tisValid = value.length >= rules.minLength && isValid\r\n\t\t}\r\n\r\n\t\tif (rules.maxLength) {\r\n\t\t\tisValid = value.length <= rules.maxLength && isValid\r\n\t\t}\r\n\r\n\t\tif (rules.isEmail) {\r\n\t\t\tconst pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n\t\t\tisValid = pattern.test(value) && isValid\r\n\t\t}\r\n\r\n\t\tif (rules.isNumeric) {\r\n\t\t\tconst pattern = /^\\d+$/;\r\n\t\t\tisValid = pattern.test(value) && isValid\r\n\t\t}\r\n\r\n\t\treturn isValid;\r\n\t}\r\n\r\n\tconst inputChangedHandler = (event, controlName) => {\r\n\t\tconst updatedControls = {\r\n\t\t\t...controls,\r\n\t\t\t[controlName]: {\r\n\t\t\t\t...controls[controlName],\r\n\t\t\t\tvalue: event.target.value,\r\n\t\t\t\tvalid: checkValidity(event.target.value, controls[controlName].validation),\r\n\t\t\t\ttouched: true,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tsetControls(updatedControls)\r\n\t}\r\n\tconst history = useHistory();\r\n\tconst submitHandler = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tdispatch(actions.auth(\r\n\t\t\tcontrols.email.value, \r\n\t\t\tcontrols.password.value,\r\n\t\t\tisSignup\r\n\t\t))\r\n\t\thistory.replace('/posts')\r\n\t}\r\n\r\n\tconst switchAuthModeHandler = () => {\r\n\t\tconsole.log(isSignup)\r\n\t\tsetIsSignup(isSignup => !isSignup)\r\n\t}\r\n\r\n\tconst formElementsArray = [];\r\n\tfor (let key in controls) {\r\n\t\tformElementsArray.push({\r\n\t\t\tkey: key,\r\n\t\t\tconfig: controls[key]\r\n\t\t})\r\n\t}\r\n\t\r\n\tlet form = formElementsArray.map((formElement, i) => (\r\n\t\t<Input\r\n\t\t\tkey={formElement.key}\r\n\t\t\telementType={formElement.config.elementType}\r\n\t\t\telementConfig={formElement.config.elementConfig}\r\n\t\t\tvalue={formElement.config.value}\r\n\t\t\tinvalid={!formElement.config.valid}\r\n\t\t\tshouldValidate={formElement.config.validation}\r\n\t\t\ttouched={formElement.config.touched}\r\n\t\t\tchanged={(event) => inputChangedHandler(event, formElement.key)}\r\n\t\t\tid={formElement.config.id}\r\n\t\t\tfor={formElement.config.id}\r\n\t\t\t/>\r\n\t\t\t))\r\n\t\r\n\tif (loading) {\r\n\t\tform = <Spinner/>\r\n\t}\r\n\r\n\tlet redirect = null;\r\n\tif(isAuthenticated) {\r\n\t\tconsole.log('isAuthenticated', isAuthenticated)\r\n\t\tredirect = <Redirect to={redirectPath}/>\r\n\t}\r\n\r\n\tlet errorMessage = null;\r\n\tif (error) {\r\n\t\terrorMessage = (\r\n\t\t\t<p>\r\n\t\t\t\t{error.data && error.data.error.message}\r\n\t\t\t</p>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.Auth}>\r\n\t\t\t{redirect}\r\n\t\t\t{errorMessage}\r\n\t\t\t<form onSubmit={submitHandler}>\r\n\t\t\t\t{form}\r\n\t\t\t\t<Button btnType='Success' >SUBMIT</Button>\r\n\t\t\t</form>\r\n\t\t\t<Button btnType='Danger' clicked={switchAuthModeHandler}>\r\n\t\t\t\tSWITCH TO {\r\n\t\t\t\t\tisSignup ? ' SIGNIN' : ' SIGNUP'\r\n\t\t\t\t}\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Auth;","import React, {useEffect} from 'react'\r\nimport {useDispatch} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom';\r\nimport * as actions from '../../../store/actions/index'\r\n\r\nconst Logout = () => {\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(actions.logout())\r\n\t}, [dispatch])\r\n\r\n\treturn (\r\n\t\t<Redirect to='/auth'/>\r\n\t)\r\n}\r\n\r\n\r\nexport default Logout;","const aux = (props) => props.children;\r\n\r\nexport default aux;","export default __webpack_public_path__ + \"static/media/diary.2fa09294.svg\";","import React from 'react';\r\n\r\nimport burgerLogo from '../../assets/images/diary.svg';\r\nimport s from './Logo.module.css';\r\n\r\nconst logo = (props) => (\r\n    <div className={s.Logo} style={{height: props.height}}>\r\n        <img src={burgerLogo}  style={{height: '53px'}} alt=\"Diary\" />\r\n    </div>\r\n);\r\n\r\nexport default logo;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport classes from './NavigationItem.module.css';\r\n\r\nconst navigationItem = ( props ) => (\r\n    <li className={classes.NavigationItem}>\r\n        <NavLink \r\n            to={props.link}\r\n            exact={props.exact}\r\n            activeClassName={classes.active}>{props.children}</NavLink>\r\n    </li>\r\n);\r\n\r\nexport default navigationItem;","import React from 'react';\r\nimport classes from './NavigationItems.module.css';\r\nimport NavigationItem from './NavigationItem/NavigationItem';\r\n\r\nconst navigationItems = (props) => (\r\n    <ul className={classes.NavigationItems}>      \r\n        {props.isAuthentication ? <NavigationItem link=\"/posts\" exact>Posts</NavigationItem>: null}\r\n        {!props.isAuthentication ?\r\n        <NavigationItem link=\"/auth\">Authenticate</NavigationItem>\r\n        :\r\n        <NavigationItem link=\"/logout\">Logout</NavigationItem>}\r\n    </ul>\r\n);\r\n\r\nexport default navigationItems;","import React from 'react';\r\n\r\nimport classes from './DrawerToggle.module.css';\r\n\r\nconst drawerToggle = (props) => (\r\n    <div className={classes.DrawerToggle} onClick={props.clicked}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n    </div>\r\n);\r\n\r\nexport default drawerToggle;","import React from 'react';\r\n\r\nimport classes from './Toolbar.module.css';\r\nimport Logo from '../../Logo/Logo';\r\nimport NavigationItems from '../NavigationItems/NavigationItems';\r\nimport DrawerToggle from '../SideDrawer/DrawerToggle/DrawerToggle';\r\n\r\nconst toolbar = ( props ) => (\r\n    <header className={classes.Toolbar}>\r\n        <DrawerToggle clicked={props.drawerToggleClicked} />\r\n        <div className={classes.Logo}>\r\n            <Logo />\r\n        </div>\r\n        <nav className={classes.DesktopOnly}>\r\n            <NavigationItems isAuthentication={props.isAuthentication}/>\r\n        </nav>\r\n    </header>\r\n);\r\n\r\nexport default toolbar;","import React from 'react';\r\n\r\nimport Logo from '../../Logo/Logo';\r\nimport NavigationItems from '../NavigationItems/NavigationItems';\r\nimport classes from './SideDrawer.module.css';\r\nimport Backdrop from '../../UI/Backdrop/Backdrop';\r\nimport Aux from '../../../hoc/_Aux/_Aux';\r\n\r\nconst sideDrawer = ( props ) => {\r\n    let attachedClasses = [classes.SideDrawer, classes.Close];\r\n    if (props.open) {\r\n        attachedClasses = [classes.SideDrawer, classes.Open];\r\n    }\r\n    return (\r\n        <Aux>\r\n            <Backdrop show={props.open} clicked={props.closed}/>\r\n            <div className={attachedClasses.join(' ')}>\r\n                <div className={classes.Logo}>\r\n                    <Logo />\r\n                </div>\r\n                <nav>\r\n                    <NavigationItems isAuthentication={props.isAuthentication}/>\r\n                </nav>\r\n            </div>\r\n        </Aux>\r\n    );\r\n};\r\n\r\nexport default sideDrawer;","import React, { Component } from 'react';\r\n\r\nimport Aux from '../_Aux/_Aux';\r\nimport classes from './Layout.module.css';\r\nimport Toolbar from '../../components/Navigation/Toolbar/Toolbar';\r\nimport SideDrawer from '../../components/Navigation/SideDrawer/SideDrawer';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Layout extends Component {\r\n    state = {\r\n        showSideDrawer: false\r\n    }\r\n\r\n    sideDrawerClosedHandler = () => {\r\n        this.setState( { showSideDrawer: false } );\r\n    }\r\n\r\n    sideDrawerToggleHandler = () => {\r\n        this.setState( ( prevState ) => {\r\n            return { showSideDrawer: !prevState.showSideDrawer };\r\n        } );\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Aux>\r\n                <Toolbar drawerToggleClicked={this.sideDrawerToggleHandler} isAuthentication={this.props.isAuthentication}/>\r\n                <SideDrawer\r\n                    isAuthentication={this.props.isAuthentication}\r\n                    open={this.state.showSideDrawer}\r\n                    closed={this.sideDrawerClosedHandler} />\r\n                <main className={classes.Content}>\r\n                    {this.props.children}\r\n                </main>\r\n            </Aux>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tisAuthentication: state.auth.token !== null,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Layout);","// import { ThemeProvider } from 'emotion-theming'\r\n// import theme from '@rebass/preset'\r\nimport './App.css'\r\n\r\nimport {Route, Switch, withRouter, Redirect} from 'react-router-dom';\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport DiaryBuilder from './containers/DiaryBuilder/DiaryBuilder'\r\nimport Start from './containers/Start/Start';\r\nimport Read from './containers/Read/Read';\r\nimport Posts from './containers/PostsSecond/Posts';\r\nimport Auth from './containers/Auth/AuthSecond';\r\nimport Logout from './containers/Auth/Logout/LogoutSecond';\r\nimport * as actions from './store/actions/index'\r\nimport React, {useEffect} from 'react';\r\nimport Layout from './hoc/Layout/Layout';\r\n\r\n\r\nconst App = (props) => {\r\n    const isAuthenticated = useSelector(state => state.auth.token !== null)\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(actions.authCheckState())\r\n        const expirationDate = localStorage.getItem('expirationDate');\r\n        console.log('expirationDate App', expirationDate)\r\n    }, [dispatch])\r\n\r\n\r\n    let router = <Switch>\r\n        <Route path=\"/auth\" exact component={Auth}/>\r\n        <Redirect to='/auth'/>\r\n    </Switch>\r\n    if (isAuthenticated) {\r\n        router = <Switch>\r\n            <Route path=\"/start\" component={Start}/>\r\n            <Route path=\"/logout\" component={Logout}/>\r\n            <Route path=\"/posts\" component={Posts}/>\r\n            <Route path=\"/\" exact component={DiaryBuilder}/>\r\n            <Route path=\"/read\" component={Read}/>\r\n            <Redirect to='/posts'/>\r\n        </Switch>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Layout>{router}</Layout>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const updateObject = (oldObject, updatedProperties) => {\r\n\treturn {\r\n\t\t...oldObject,\r\n\t\t...updatedProperties\r\n\t}\r\n}","import * as actionTypes from '../actions/actionTypes';\r\nimport { updateObject } from '../utility';\r\n\r\nconst initialState = {\r\n\ttoken: null,\r\n\tuserId: null,\r\n\terror: null,\r\n\tloading: false,\r\n\tredirectPath: '/'\r\n}\r\n\r\nconst authStart = (state, action) => {\r\n\treturn updateObject(state, {error: null, loading: true})\r\n}\r\n\r\nconst authSuccess = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\ttoken: action.idToken,\r\n\t\tuserId: action.userId, \r\n\t\tloading: false,\r\n\t\terror: null,\r\n\t})\r\n}\r\n\r\nconst authFail = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\tloading: false, \r\n\t\terror: action.error\r\n\t})\r\n}\r\n\r\nconst reAuthSuccess = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\ttoken: action.idToken,\r\n\t\tuserId: action.userId,\r\n\t\terror: null,\r\n\t})\r\n}\r\n\r\nconst reAuthFail = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\tloading: false,\r\n\t\terror: action.error\r\n\t})\r\n}\r\n\r\nconst logout = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\ttoken: null,\r\n\t\tuserId: null\r\n\t})\r\n}\r\n\r\nconst setRedirectPath = (state, action) => {\r\n\treturn updateObject(state, {\r\n\t\tredirectPath: action.path\r\n\t})\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase actionTypes.AUTH_START: return authStart(state, action);\r\n\t\tcase actionTypes.AUTH_SUCCESS: return authSuccess(state, action);\r\n\t\tcase actionTypes.AUTH_FAIL: return authFail(state, action);\r\n\t\tcase actionTypes.RE_AUTH_SUCCESS: return reAuthSuccess(state, action);\r\n\t\tcase actionTypes.RE_AUTH_FAIL: return reAuthFail(state, action);\r\n\t\tcase actionTypes.AUTH_LOGOUT: return logout(state, action);\r\n\t\tcase actionTypes.SET_REDIRECT_PATH: return setRedirectPath(state, action);\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default reducer;","import * as actionTypes from '../actions/actionTypes';\r\nimport {updateObject} from '../utility';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    removing: false,\r\n    fetchedPostsRes: [],\r\n    diaryId: '',\r\n    date: '',\r\n    newDate: '',\r\n    title: '',\r\n    active: false,\r\n    titleArray: [\r\n        {id: 0, name: 'context'},\r\n        {id: 1, name: 'feelings'},\r\n        {id: 3, name: 'thought'},\r\n        {id: 2, name: 'body'},\r\n        {id: 4, name: 'isItFamiliar'},\r\n        {id: 5, name: 'decision'},\r\n        {id: 6, name: 'conclusion'},\r\n        {id: 7, name: 'want'},\r\n        {id: 8, name: 'care'},\r\n    ],\r\n    template: [\r\n        'context',\r\n        'feelings',\r\n        'body',\r\n        'thought',\r\n        'isItFamiliar',\r\n        'decision',\r\n        'conclusion',\r\n        'want',\r\n        'care',\r\n    ],\r\n    diaryObj: {},\r\n}\r\n\r\nconst setActive = (state, action) => {\r\n    return updateObject(state, {\r\n        active: action.active\r\n    })\r\n}\r\n\r\nconst setTitle = (state, action) => {\r\n    return updateObject(state, {\r\n        title: action.title\r\n    })\r\n}\r\n\r\nconst setValue = (state, action) => {\r\n    return updateObject(state, {\r\n        value: action.value\r\n    })\r\n}\r\n\r\nconst clearDiaryObjToEdit = (state, action) => {\r\n    return {\r\n        ...state,\r\n        diaryObj: {}\r\n    }\r\n}\r\n\r\n//сделать saveNoteInStateStart ..Success ..Fail\r\n//иначе некрасиво очистка стейта с saveNoteInState(null, null)\r\n//либо получение поста для чтения сделать из сервера - сделала\r\nconst saveNoteInState = (state, action) => {\r\n    let value = null\r\n    if (action.value) {\r\n        value = action.value\r\n    }\r\n    return {\r\n        ...state,\r\n        diaryObj: {\r\n            ...state.diaryObj,\r\n            [action.title]: value,\r\n        }\r\n    }\r\n}\r\n\r\nconst noteInit = (state, action) => {\r\n    const date = new Date();\r\n    console.log('date', date)\r\n    const year = date.getFullYear();\r\n    let month = date.getMonth();\r\n    const day = date.getDate();\r\n    const hour = date.getHours();\r\n    const minutes = date.getMinutes();\r\n\r\n    const formatDate = (num) => {\r\n        let res;\r\n        if (num.toString().length < 2) {\r\n            res = '0' + num\r\n        } else {\r\n            res = num\r\n        }\r\n        return res\r\n    }\r\n\r\n    let fullDate = day + '.' + formatDate(month + 1) + '.' + year + ' ' + formatDate(hour) + ':' + formatDate(minutes);\r\n    let millsec = Date.parse(date);\r\n    return updateObject(state, {\r\n        title: action.title,\r\n        diaryObj: {},\r\n        fullDate: null,\r\n        millsec: null,\r\n    })\r\n}\r\n\r\nconst saveDiaryStart = (state, action) => {\r\n    return updateObject(state, {\r\n            loading: true,\r\n        }\r\n    )\r\n}\r\n\r\nconst saveDiaryFail = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: false,\r\n        error: action.error\r\n    })\r\n}\r\n\r\nconst saveDiarySuccess = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: false,\r\n        diaryId: action.diaryId,\r\n    })\r\n}\r\n\r\nconst fetchPostsStart = (state, action) => {\r\n    return updateObject(state, {loading: true})\r\n}\r\n\r\nconst fetchPostsFail = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: false,\r\n        error: action.error\r\n    })\r\n}\r\n\r\nconst fetchPostsSuccess = (state, action) => {\r\n    const fetchedPostsRes = []\r\n    for (let key in action.fetchedPosts) {\r\n        fetchedPostsRes.push({\r\n            ...action.fetchedPosts[key],\r\n            id: key,\r\n        })\r\n    }\r\n    return {\r\n        ...state,\r\n        loading: false,\r\n        fetchedPostsRes: fetchedPostsRes\r\n    }\r\n}\r\n\r\nconst removePostStart = (state, action) => {\r\n    return {\r\n        ...state,\r\n        loading: true,\r\n    }\r\n}\r\n\r\n//по сути ненужный акшн, так как при монтировании страницы постов,\r\n//они подтягиваются с сервера\r\nconst removePostSuccess = (state, action) => {\r\n    const updatedPosts = [];\r\n    const posts = [...state.fetchedPostsRes]\r\n\r\n    for (let key in posts) {\r\n        if (posts[key].id !== action.postId) {\r\n            updatedPosts.push(posts[key])\r\n        }\r\n    }\r\n    return {\r\n        ...state,\r\n        fetchedPostsRes: updatedPosts,\r\n        loading: false,\r\n    }\r\n}\r\n\r\nconst removePostFail = (state, action) => {\r\n    return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.error,\r\n    }\r\n}\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.SET_ACTIVE:\r\n            return setActive(state, action);\r\n        case actionTypes.SET_TITLE:\r\n            return setTitle(state, action);\r\n        case actionTypes.SET_VALUE:\r\n            return setValue(state, action);\r\n        case actionTypes.SAVE_NOTE_IN_STATE:\r\n            return saveNoteInState(state, action);\r\n        case actionTypes.NOTE_INIT:\r\n            return noteInit(state, action);\r\n        case actionTypes.SAVE_DIARY_START:\r\n            return saveDiaryStart(state, action);\r\n        case actionTypes.SAVE_DIARY_FAIL:\r\n            return saveDiaryFail(state, action);\r\n        case actionTypes.SAVE_DIARY_SUCCESS:\r\n            return saveDiarySuccess(state, action);\r\n        case actionTypes.FETCH_POSTS_START:\r\n            return fetchPostsStart(state, action);\r\n        case actionTypes.FETCH_POSTS_FAIL:\r\n            return fetchPostsFail(state, action);\r\n        case actionTypes.FETCH_POSTS_SUCCESS:\r\n            return fetchPostsSuccess(state, action);\r\n        case actionTypes.REMOVE_POST_SUCCESS:\r\n            return removePostSuccess(state, action);\r\n        case actionTypes.REMOVE_POST_START:\r\n            return removePostStart(state, action);\r\n        case actionTypes.REMOVE_POST_FAIL:\r\n            return removePostFail(state, action);\r\n        case actionTypes.CLEAR_DIARY_OBJ_TO_EDIT:\r\n            return clearDiaryObjToEdit(state, action);\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nexport default reducer;","import * as actionTypes from '../actions/actionTypes';\r\nimport {updateObject} from '../utility';\r\n\r\nconst initialState = {\r\n    postData: {\r\n        fullDate: null,\r\n        millsec: null,\r\n        note: {},\r\n        userId: null,\r\n    },\r\n    postId: null,\r\n}\r\n\r\nconst setPostId = (state, action) => {\r\n    return updateObject(state, {\r\n        postId: action.postId\r\n    })\r\n}\r\n\r\nconst setPostDataToReadStart = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: true,\r\n        postData: null,\r\n    })\r\n}\r\n\r\nconst setPostDataToReadSuccess = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: false,\r\n        postData: action.postData\r\n    })\r\n}\r\n\r\nconst setPostDataToReadFail = (state, action) => {\r\n    return updateObject(state, {\r\n        loading: false,\r\n        error: action.error\r\n    })\r\n}\r\n\r\nconst removePostNote = (state, action) => {\r\n    return updateObject(state, {\r\n        postNote: action.postNote,\r\n    })\r\n}\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.REMOVE_NOTE_TO_EDIT:\r\n            return removePostNote(state, action);\r\n        case actionTypes.SET_POST_ID:\r\n            return setPostId(state, action);\r\n        case actionTypes.SET_POST_DATA_TO_READ_START:\r\n            return setPostDataToReadStart(state, action);\r\n        case actionTypes.SET_POST_DATA_TO_READ_SUCCESS:\r\n            return setPostDataToReadSuccess(state, action);\r\n        case actionTypes.SET_POST_DATA_TO_READ_FAIL:\r\n            return setPostDataToReadFail(state, action);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","// import React from 'react';\r\n// import ReactDOM from 'react-dom';\r\n// import './index.css';\r\n// import App from './App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\n// ReactDOM.render(\r\n//   <React>\r\n//     <App />\r\n//   </React>,\r\n//   document.getElementById('root')\r\n// );\r\n\r\n// // If you want to start measuring performance in your app, pass a function\r\n// // to log results (for example: reportWebVitals(console.log))\r\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport authReducer from './store/reducers/auth';\r\nimport diaryReducer from './store/reducers/diary';\r\nimport readReducer from './store/reducers/read';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst rootReducer = combineReducers({\r\n\tauth: authReducer,\r\n\tdiary: diaryReducer,\r\n\tread: readReducer\r\n});\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\n\r\n\r\nconst app = (\r\n    <Provider store={store}>\r\n        <BrowserRouter>\r\n            <App />\r\n        </BrowserRouter>\r\n    </Provider>\r\n);\r\n\r\nReactDOM.render( app, document.getElementById( 'root' ) );\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}